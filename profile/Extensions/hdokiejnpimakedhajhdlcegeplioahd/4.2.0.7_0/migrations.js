var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Migration=function(){function e(){}return e}(),Migrator=function(){function e(t){this.migrations=[],this.progress=0,this.hasLinkedAccount=!!e.migrationBackground.getLinkedUsername(),this.migrations=t.sort(function(e,t){if(e.version<t.version)return-1;if(e.version>t.version)return 1;throw new Error("Duplicate migrations!")})}return e.executeMigrations=function(t){var r=this,n=[];if(!e.migrationsRunning){if("loading"==document.readyState)return void document.addEventListener("DOMContentLoaded",function(){e.executeMigrations()});e.formfillMigrationBackground.isEnabled()&&n.push(new FormfillAndNotesMigration);var i=new e(n);this.migrationBackground.getLinkedBlobVersion(function(n){var o=r.migrationBackground.getBlobVersion();null!==o&&(i.hasPendingMigrations(o)||null!==n&&i.hasPendingMigrations(n))&&(e.setMigrationInProgress(),t&&i.setProgressCallback(t),null!==n&&i.hasPendingMigrations(n)?i.migrateLinked(n,function(){i.hasPendingMigrations(o)?i.migrate(o,function(){e.setMigrationFinished()}):e.setMigrationFinished()}):i.migrate(o,function(){e.setMigrationFinished()}))})}},Object.defineProperty(e,"migrationBackground",{get:function(){return e.getBg().MigrationBackground},enumerable:!0,configurable:!0}),e.getBg=function(){return"undefined"!=typeof bg?bg:getBG()},e.setMigrationInProgress=function(){e.migrationsRunning=!0,this.migrationBackground.publishState(!0)},e.setMigrationFinished=function(){e.migrationsRunning=!1,this.migrationBackground.publishState(!1)},Object.defineProperty(e,"formfillMigrationBackground",{get:function(){return e.getBg().FormfillMigrationBackground},enumerable:!0,configurable:!0}),e.prototype.setProgressCallback=function(e){this.progressCallback=e},e.prototype.hasPendingMigrations=function(e){for(var t=0,r=this.migrations;t<r.length;t++){if(e<r[t].version)return!0}return!1},e.prototype.migrateLinked=function(t,r){var n=this;if(!this.hasLinkedAccount)return void r(t);this.updateProgress();for(var i=0,o=this.migrations;i<o.length;i++){var s=o[i],a=function(e){if(t<e.version)return e.migrateLinked(function(){n.progress+=100,n.migrateLinked(e.version,r)},function(e,t){n.updateProgress(Math.floor(e/Math.max(t,1)*100))}),{value:void 0}}(s);if("object"==typeof a)return a.value}e.migrationBackground.saveLinkedBlobVersion(t,function(){r&&r(t)})},e.prototype.migrate=function(t,r){var n=this;this.updateProgress();for(var i=0,o=this.migrations;i<o.length;i++){var s=o[i],a=function(e){if(t<e.version)return e.migrate(function(){n.progress+=100,n.migrate(e.version,r)},function(e,t){n.updateProgress(Math.floor(e/Math.max(t,1)*100))}),{value:void 0}}(s);if("object"==typeof a)return a.value}e.migrationBackground.saveBlobVersion(t,function(){r&&r(t)})},e.prototype.updateProgress=function(e){void 0===e&&(e=0),this.progressCallback&&this.progressCallback(this.progress+Math.min(e,100),100*this.migrations.length*(this.hasLinkedAccount?2:1))},e}();Migrator.migrationsRunning=!1;var ObservableState=function(){function e(){this.stateSubscribers=[],this.temporarySubscribers=[],this.isRunning=!1,this._wasMigration=!1}return e.prototype.subscribeToState=function(e){e&&-1===this.stateSubscribers.indexOf(e)&&(this.stateSubscribers.push(e),this.isRunning&&e(this.isRunning))},e.prototype.subscribeToStateOnce=function(e){e&&-1===this.stateSubscribers.indexOf(e)&&this.temporarySubscribers.push(e)},e.prototype.wasMigration=function(e){e(this._wasMigration)},e.prototype.publishState=function(e){this.isRunning&&!e&&(this._wasMigration=!0),this.isRunning=e;for(var t=0,r=this.stateSubscribers;t<r.length;t++){(0,r[t])(e)}var n=this.temporarySubscribers;this.temporarySubscribers=[];for(var i=0,o=n;i<o.length;i++){(0,o[i])(e)}},e}(),MigrationBackgroundWeb=function(e){function t(){var t=e.call(this)||this;return t.apiUrl="/lmiapi","string"==typeof base_url&&(t.apiUrl=base_url.replace(/\/$/,"")+t.apiUrl),t}return __extends(t,e),t.prototype.getBlobVersion=function(){return"undefined"!=typeof g_blob_version&&void 0!==g_blob_version.version?Number(g_blob_version.version):null},t.prototype.getLinkedUsername=function(){for(var e=0,t=g_shares;e<t.length;e++){var r=t[e];if(void 0!==r.associative&&1==r.associative)return r.decsharename}return null},t.prototype.getLinkedBlobVersion=function(e){if(!this.getLinkedUsername())return void e(null);$.get(this.apiUrl+"/users/me/blobversion/linked",function(t){e(t.version)})},t.prototype.saveBlobVersion=function(e,t){this.saveVersionRequest(this.apiUrl+"/users/me/blobversion",e,t)},t.prototype.saveLinkedBlobVersion=function(e,t){this.saveVersionRequest(this.apiUrl+"/users/me/blobversion/linked",e,t)},t.prototype.sendSegmentEvent=function(e,t){sendLpImprove(e,t)},t.prototype.saveVersionRequest=function(e,t,r){this.getToken(function(n){$.ajax({url:e,method:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({version:t}),headers:{"x-csrf-token":n},success:function(){g_blob_version.version=t,r()}})})},t.prototype.getToken=function(e){$.post(this.apiUrl+"/csrf",function(t){e(t)})},t}(ObservableState),MigrationBackgroundExtension=function(e){function t(){var t=e.call(this)||this;return t.apiUrl="/lmiapi","string"==typeof base_url&&(t.apiUrl=base_url.replace(/\/$/,"")+t.apiUrl),t}return __extends(t,e),t.prototype.getBlobVersion=function(){return"undefined"!=typeof g_blob_version&&void 0!==g_blob_version.version?Number(g_blob_version.version):null},t.prototype.getLinkedUsername=function(){for(var e=0,t=g_shares;e<t.length;e++){var r=t[e];if(void 0!==r.associative&&1==r.associative)return r.decsharename}return null},t.prototype.getLinkedBlobVersion=function(e){if(!this.getLinkedUsername())return void e(null);LP.lpMakeRequestReallyReal(this.apiUrl+"/users/me/blobversion/linked","",function(t){if(4===t.readyState&&200===t.status){var r=JSON.parse(t.responseText);e(r.version)}else 4===t.readyState&&lpmakerequesterror("invalidresponse",{url:t.responseURL},!1)},void 0,{method:"GET"})},t.prototype.saveBlobVersion=function(e,t){this.saveVersionRequest(this.apiUrl+"/users/me/blobversion",e,t)},t.prototype.saveLinkedBlobVersion=function(e,t){this.saveVersionRequest(this.apiUrl+"/users/me/blobversion/linked",e,t)},t.prototype.sendSegmentEvent=function(e,t){sendLpImprove(e,t)},t.prototype.saveVersionRequest=function(e,t,r){this.getToken(function(n){LP.lpMakeRequestReallyReal(e,JSON.stringify({version:t}),function(e){4===e.readyState&&200===e.status?(g_blob_version.version=t,r()):4===e.readyState&&lpmakerequesterror("invalidresponse",{url:e.responseURL},!1)},void 0,{"x-csrf-token":n,"Content-Type":"application/json"})})},t.prototype.getToken=function(e){LP.lpMakeRequestReallyReal(this.apiUrl+"/csrf","",function(t){4===t.readyState&&200===t.status?e(JSON.parse(t.responseText)):4===t.readyState&&lpmakerequesterror("invalidresponse",{url:t.responseURL},!1)})},t}(ObservableState),FormfillStore=function(){function e(){}return e.prototype.getLinkedFormfills=function(){return this.useShareKey=!0,this.decrypt(this.linkedEncryptedFormfills)},e.prototype.getFormfills=function(){return this.useShareKey=!1,this.decrypt(this.encryptedFormfills)},e.prototype.decrypt=function(e){for(var t=[],r=0,n=e;r<n.length;r++){var i=n[r],o=new FormFillType;for(var s in i)if(i.hasOwnProperty(s)){var a=void 0;if(o[s]=i[s],"custom_fields"===s){o[s]=[];for(var u in i[s]){o[s][u]=this.objectAssign({},i[s][u]);var c=o[s][u];for(var p in c)c[p]&&(a=this.decryptString(c[p],!0))&&(c[p]=a)}}else o[s]&&(a=this.decryptString(o[s],!0))&&(o[s]=a)}o.decprofilename||(o.decprofilename=o.profilename),t.push(o)}return t},e.prototype.objectAssign=function(e,t){for(var r=1;r<arguments.length;r++){var n=arguments[r];if(null!=n)for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},e}(),FormFillType=function(){function e(){this.monthNames=["","January","February","March","April","May","June","July","August","September","October","November","December"]}return e.prototype.hasSocialSecurityNumber=function(){return!!this.ssn},e.prototype.hasAddressData=function(){return!!(this.title||this.firstname||this.middlename||this.lastname||this.username||this.gender||this.birthday||this.company||this.address1||this.address2||this.address3||this.city||this.county||this.timezone||this.email||this.phone||this.mobilephone||this.evephone||this.fax||this.faxphone||this.eve3lcc||this.mobile3lcc||!this.hasSocialSecurityNumber()&&!this.hasPaymentCardData()&&!this.hasBankNoteData()&&this.notes)},e.prototype.hasPaymentCardData=function(){return!!(this.ccname||this.ccnum||this.ccstart||this.ccexp||this.cccsc||this.ccissuenum)},e.prototype.hasBankNoteData=function(){return!!(this.bankname||this.bankroutingnum||this.bankacctnum)},e.prototype.hasCustomFields=function(){return!!this.custom_fields.length},e.prototype.getSerializedPhone=function(){return this.phone?JSON.stringify({num:this.phone,ext:this.phoneext,cc3l:this.phone3lcc}):""},e.prototype.getSerializedEveningPhone=function(){return this.evephone?JSON.stringify({num:this.evephone,ext:this.eveext,cc3l:this.evephone3lcc||this.eve3lcc}):""},e.prototype.getSerializedMobilePhone=function(){return this.mobilephone?JSON.stringify({num:this.mobilephone,ext:this.mobileext,cc3l:this.mobilephone3lcc||this.mobile3lcc}):""},e.prototype.getSerializedFax=function(){return this.fax||this.faxphone?JSON.stringify({num:this.fax||this.faxphone,ext:this.faxext,cc3l:this.fax3lcc}):""},e.prototype.getBirthdayLastpassFormat=function(){var e=/([^-]*)-([^-]*)-([^-]*)/g.exec(this.birthday);return e&&e.length>=3?this.monthNames[Number(e[2])]+","+e[3]+","+e[1]:",,"},e.prototype.getCreditCardStartLastpassFormat=function(){var e=/([^-]*)-([^-]*)/g.exec(this.ccstart);return e&&e.length>=2?this.monthNames[Number(e[2])]+","+e[1]:","},e.prototype.getCreditCardExpireLastpassFormat=function(){var e=/([^-]*)-([^-]*)/g.exec(this.ccexp);return e&&e.length>=2?this.monthNames[Number(e[2])]+","+e[1]:","},e}(),NoteType=function(){function e(){}return e}(),FormfillAndNotesMigration=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fieldMaxLength=50,t.migrationQueue=[],t.successCallback=function(){},t.progress=-1,t.startSegmentEventSent=!1,t.noteAdditionHandler=function(){t.executeNextMigration()},t}return __extends(t,e),Object.defineProperty(t.prototype,"version",{get:function(){return 20170404140712},enumerable:!0,configurable:!0}),t.prototype.migrateLinked=function(e,t){this.successCallback=e,this.progressCallback=t,this.sendStartSegmentEventOnce();var r=this.formfillMigrationBackground.getLinkedFormfills();this.migrateFormfills(r),this.attachMigrationQueueExecutor()},t.prototype.migrate=function(e,t){this.successCallback=e,this.progressCallback=t,this.sendStartSegmentEventOnce();var r=this.formfillMigrationBackground.getFormfills();this.migrateFormfills(r),this.attachMigrationQueueExecutor()},t.prototype.sendStartSegmentEventOnce=function(){this.startSegmentEventSent||(this.migrationBackground.sendSegmentEvent("migration::formfill::started"),this.startSegmentEventSent=!0)},t.prototype.migrateFormfills=function(e){for(var t=this,r=this,n=0,i=e;n<i.length;n++){var o=i[n];!function(e){e.hasSocialSecurityNumber()&&r.migrationQueue.push(function(){t.saveSocialSecurityNumberNote(e)}),e.hasAddressData()&&r.migrationQueue.push(function(){t.saveAddressNote(e)}),e.hasPaymentCardData()&&r.migrationQueue.push(function(){t.savePaymentCardNote(e)}),e.hasBankNoteData()&&r.migrationQueue.push(function(){t.saveBankAccountNote(e)}),e.hasCustomFields()&&r.migrationQueue.push(function(){t.saveCustomFields(e)})}(o)}},t.prototype.saveSocialSecurityNumberNote=function(e){var t={group:e.group,name:e.decprofilename,notetype:this.getNoteTypes().SSN,pwprotect:e.pwprotect,fav:"0",language:e.profilelanguage,extra:{Name:e.firstname+" "+e.middlename+" "+e.lastname,Number:e.ssn,Notes:e.notes?""+e.notes:""}};this.saveNote(t)},t.prototype.saveAddressNote=function(e){var t={group:e.group,name:e.decprofilename,notetype:this.getNoteTypes().ADDRESS,pwprotect:e.pwprotect,fav:"0",language:e.profilelanguage,extra:{Title:e.title,"First Name":e.firstname,"Middle Name":e.middlename,"Last Name":e.lastname,Username:e.username,Gender:e.gender,Birthday:e.getBirthdayLastpassFormat(),Company:e.company,"Address 1":e.address1,"Address 2":e.address2,"Address 3":e.address3,"City / Town":e.city,County:e.county,State:e.state,"Zip / Postal Code":e.zip,Country:e.country,Timezone:e.timezone,"Email Address":e.email,Phone:e.getSerializedPhone(),"Evening Phone":e.getSerializedEveningPhone(),"Mobile Phone":e.getSerializedMobilePhone(),Fax:e.getSerializedFax(),Notes:e.notes?e.notes:""}};this.saveNote(t)},t.prototype.savePaymentCardNote=function(e){var t={group:e.group,name:e.decprofilename,notetype:this.getNoteTypes().CREDIT,pwprotect:e.pwprotect,fav:"0",language:e.profilelanguage,extra:{"Name on Card":e.ccname,Type:"",Number:e.ccnum,"Security Code":e.cccsc,"Start Date":e.getCreditCardStartLastpassFormat(),"Expiration Date":e.getCreditCardExpireLastpassFormat(),Notes:(e.notes?e.notes+"\n":"")+(e.ccissuenum?"Issue number: "+e.ccissuenum:"")}};this.saveNote(t)},t.prototype.saveBankAccountNote=function(e){var t={group:e.group,name:e.decprofilename,notetype:this.getNoteTypes().BANK,pwprotect:e.pwprotect,fav:"0",language:e.profilelanguage,extra:{"Bank Name":e.bankname,"Account Type":"","Routing Number":e.bankroutingnum,"Account Number":e.bankacctnum,"SWIFT Code":"","IBAN Number":"",Pin:"","Branch Address":"","Branch Phone":"",Notes:e.notes}};this.saveNote(t)},t.prototype.saveCustomFields=function(e){for(var t=this,r=this.escape("Formfill "+e.decprofilename),n=[],i=[],o="",s={},a=0,u=e.custom_fields;a<u.length;a++){var c=u[a],p=this.escape(c.text);p.length>this.fieldMaxLength&&(p=p.substring(0,this.fieldMaxLength)),p||(p="empty"),-1!==c.text.indexOf("\n")||-1!==c.value.indexOf("\n")?o+=c.text+":"+c.value+"\n":-1===i.indexOf(p)&&(n.push({text:p,type:"text",options:null}),s[p]=c.value,i.push(p))}""!==o&&(n.push({text:"Notes",type:"textarea",options:null}),s.Notes=o),this.formfillMigrationBackground.createCustomNoteType(r,n,function(i){var o={group:e.group,name:e.decprofilename,notetype:"Custom_"+i,pwprotect:e.pwprotect,fav:"0",language:e.profilelanguage,extra:s,template:JSON.stringify({id:i,title:r,fields:n})};t.saveNote(o)})},t.prototype.escape=function(e){return e.replace(/&/g,"").replace(/</g,"").replace(/>/g,"").replace(/\(/g,"").replace(/\)/g,"").replace(/;/g,"").replace(/:/g,"").replace(/~/g,"").replace(/`/g,"").replace(/"/g,"").replace(/'/g,"")},t.prototype.saveNote=function(e){"undefined"!=typeof Note?this.saveInForeground(e):this.saveInBackground(e)},t.prototype.saveInForeground=function(e){var t=e.group;t||(t=Strings.Consts.NONE_GROUP);var r=LPProxy.getGroupByName(t);if(!r&&t){var n=LPProxy.getExistingGroupParent(t);r=new DummyGroup(t,n?n.getSharedGroup():null)}var i=new Note;i.add=this.getNotePatchedAddFunction(),i.addFromDialog(e,r,{source:"vault"})},t.prototype.saveInBackground=function(e){var t=this;this.formfillMigrationBackground.saveNote(e,function(){t.noteAdditionHandler()})},t.prototype.getNotePatchedAddFunction=function(){return function(e,t){!function(r,n){LPRequest.makeUpdateRequest(LPProxy.addNote,{parameters:[r,e,t],success:function(t){r.update(t,e,n),LPProxy.addItem(r),Topics.get(Topics.NOTE_ADDED).publish(r,e)}})}(this,this._data.attacharraychanges)}},t.prototype.getNoteTypes=function(){return{ADDRESS:"Address",BANK:"Bank Account",CREDIT:"Credit Card",GENERIC:"Generic",SSN:"Social Security"}},t.prototype.attachMigrationQueueExecutor=function(){Topics.get(Topics.NOTE_ADDED).subscribe(this.noteAdditionHandler),this.progressMax=this.migrationQueue.length,this.executeNextMigration()},t.prototype.executeNextMigration=function(){if(this.progress+=1,this.progressCallback&&this.progressCallback(this.progress,this.progressMax),this.migrationQueue.length){this.migrationQueue.pop()()}else Topics.get(Topics.NOTE_ADDED).unsubscribe(this.noteAdditionHandler),Topics.get(Topics.REFRESH_DATA).publish(),this.migrationBackground.sendSegmentEvent("migration::formfill::completed"),this.successCallback()},t.prototype.getBg=function(){return"undefined"!=typeof bg?bg:getBG()},Object.defineProperty(t.prototype,"formfillMigrationBackground",{get:function(){return this.getBg().FormfillMigrationBackground},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"migrationBackground",{get:function(){return this.getBg().MigrationBackground},enumerable:!0,configurable:!0}),t}(Migration),FormfillMigrationBackgroundWeb=function(e){function t(){var t=e.call(this)||this;return t.apiUrl="/lmiapi","string"==typeof base_url&&(t.apiUrl=base_url.replace(/\/$/,"")+t.apiUrl),t}return __extends(t,e),t.prototype.isEnabled=function(){return LPContentScriptFeatures.formfill_migration},t.prototype.createCustomNoteType=function(e,t,r){var n=this;this.getToken(function(i){$.ajax({url:n.apiUrl+"/note-templates",type:"POST",dataType:"json",contentType:"application/json",headers:{"X-CSRF-TOKEN":i},data:JSON.stringify({title:e,method:"web",fields:t}),success:function(e){r(e.id)}})})},t.prototype.saveNote=function(e,t){throw new Error("Migrate in the foreground!")},Object.defineProperty(t.prototype,"linkedEncryptedFormfills",{get:function(){return g_formfills.filter(function(e){return!!e.sharefolderid})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"encryptedFormfills",{get:function(){return g_formfills.filter(function(e){return!e.sharefolderid})},enumerable:!0,configurable:!0}),t.prototype.decryptString=function(e,t){var r=void 0;return this.useShareKey&&(r=this.getShareKey()),lpmdec(e,t,r)},t.prototype.getToken=function(e){$.post(this.apiUrl+"/csrf",function(t){e(t)})},t.prototype.getShareKey=function(){for(var e=0,t=g_shares;e<t.length;e++){var r=t[e];if(void 0!==r.associative&&1==r.associative)return r.key}},t}(FormfillStore),FormfillMigrationBackgroundExtension=function(e){function t(){var t=e.call(this)||this;return t.apiUrl="/lmiapi","string"==typeof base_url&&(t.apiUrl=base_url.replace(/\/$/,"")+t.apiUrl),t}return __extends(t,e),t.prototype.isEnabled=function(){return LPContentScriptFeatures.formfill_migration},t.prototype.createCustomNoteType=function(e,t,r){var n=this;this.getToken(function(i){var o={title:e,method:"web",fields:t};LP.lpMakeRequestReallyReal(n.apiUrl+"/note-templates",JSON.stringify(o),function(e){4===e.readyState&&200===e.status?r(JSON.parse(e.responseText).id):4===e.readyState&&lpmakerequesterror("invalidresponse",{url:e.responseURL},!1)},void 0,{"x-csrf-token":i,"Content-Type":"application/json"})})},t.prototype.saveNote=function(e,t){var r={action:"",aid:"0",basic_auth:"0",captcha_id:"",custom_js:"",extra:"",fields:[],group:"",fiid:"",getpw:!1,individualshare:!1,last_touch:"0",method:"",newvalues:[],realm_data:"",sharedfromuid:"",submit_id:"",urid:"0",fav:"0",username:"",password:"",sn:1,url:"http://sn"},n=this.localKey;e.encname=lpmenc(e.name,!0,n);var i="NoteType:"+e.notetype+"\nLanguage:"+(e.language?e.language:"en-US");for(var o in e.extra)i+="\n"+o+":"+e.extra[o];e.extra=lpmenc(i,!0,n);for(var s in r)void 0===e[s]&&(e[s]=r[s]);e.group&&(e.sharedfolderid=this.getShareId()),this.saveSite(e,t)},Object.defineProperty(t.prototype,"linkedEncryptedFormfills",{get:function(){return g_formfills.filter(function(e){return!!e.sharefolderid})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"encryptedFormfills",{get:function(){return g_formfills.filter(function(e){return!e.sharefolderid})},enumerable:!0,configurable:!0}),t.prototype.decryptString=function(e,t){var r=void 0;return this.useShareKey&&(r=this.getShareKey()),lpmdec(e,t,r)},t.prototype.saveSite=function(e,t){var r=this,n=this.createPostData(e);saveSite(this.serializePostData(n),e,t,function(){setTimeout(function(){r.saveSite(e,t)},3e4)})},t.prototype.createPostData=function(e){var t={};return t.extjs=1,t.localupdate=1,t.ajax=1,t.source="vault",t.aid=e.aid,t.name=lpenc(e.name,this.localKey),t.extra=crypto_btoa(e.extra),e.pwprotect&&(t.pwprotect="on"),"1"===e.fav&&(t.fav="on"),e.sharedfolderid&&(t.sharedfolderid=e.sharedfolderid,t.grouping=""),t.url=AES.url2hex(e.url),t.username="",t.password="",e.template&&(t.template=e.template),t.hexName=AES.url2hex(e.name),t.notetype=e.notetype,t},t.prototype.serializePostData=function(e){var t=[];for(var r in e)t.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t.join("&").replace(/%20/g,"+")},Object.defineProperty(t.prototype,"localKey",{get:function(){return this.useShareKey?this.getShareKey():g_local_key},enumerable:!0,configurable:!0}),t.prototype.getToken=function(e){LP.lpMakeRequestReallyReal(this.apiUrl+"/csrf","",function(t){4===t.readyState&&200===t.status?e(JSON.parse(t.responseText)):4===t.readyState&&lpmakerequesterror("invalidresponse",{url:t.responseURL},!1)})},t.prototype.getShareKey=function(){for(var e=0,t=g_shares;e<t.length;e++){var r=t[e];if(void 0!==r.associative&&1==r.associative)return r.key}return""},t.prototype.getShareId=function(){for(var e=0,t=g_shares;e<t.length;e++){var r=t[e];if(void 0!==r.associative&&1==r.associative)return r.id}return""},t}(FormfillStore);