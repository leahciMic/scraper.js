SiteLaunchObserver=function(t){function a(){this.acc=null,this.launchedSite=!1,this.formSubmitted=!1,this.userInteraction=!1,this.hasFormWithPassword=!1,this.formData=null,this.formDisappeared=!1,this.timeout=null,this.timedout=!1}function i(t,a){t(g_launch_site_tracking_enabled)}function e(t,a){r(t,a,15),l[t].launchedSite=!0,h(l[t].acc,"Launched")}function o(t,a){r(t,a,15),h(l[t].acc,"Filled")}function r(t,i,e){l[t]&&!l[t].launchedSite&&(clearTimeout(l[t].timeout),delete l[t]),l[t]=new a,l[t].acc=i,l[t].timeout=setTimeout(function(){var a=l[t];a&&(a.formSubmitted?(a.formDisappeared=!0,n(t,"Form disappeared")):(a.timedout=!0,n(t,"Timeout")))},1e3*e)}function n(a,i){var e=l[a];e&&(e.launchedSite?t("SiteLaunchAttempt",{URL:e.acc.url,DOMAIN:e.acc.tld,FORM_FOUND:e.hasFormWithPassword,FORM_SUBMITTED:e.formSubmitted,USER_SUBMIT:e.userInteraction,FORM_DISAPPEARED:e.formDisappeared,TIMEDOUT:e.timedout}):t("infield_login_attempt",{url:e.acc.url,domain:e.acc.tld,form_found:e.hasFormWithPassword,form_submitted:e.formSubmitted,form_disappeared:e.formDisappeared,timedout:e.timedout}),c(e),clearTimeout(e.timeout),delete l[a])}function c(t){t.hasFormWithPassword=!!t.formData||t.hasFormWithPassword,h(t.acc," Tracking Results:"),h(t.acc," FormFound: "+t.hasFormWithPassword),h(t.acc," FormSubmitted: "+t.formSubmitted),h(t.acc," FormDisappeared: "+t.formDisappeared),h(t.acc," UserInteraction: "+t.userInteraction),h(t.acc," TimedOut: "+t.timedout)}function u(t,a){if(l[a.tabID]){l[a.tabID].formData=t,l[a.tabID].formSubmitted=!0,l[a.tabID].userInteraction=t.userSubmit,s(a);var i=t.id?t.id:t.name;h(l[a.tabID].acc,"Form("+i+") submitted.")}}function m(t,a){t(l[a.tabID]&&l[a.tabID].formSubmitted)}function s(t){var a=l[t.tabID];if(a){LPTabs.get({tabID:t.tabID}).forEachWindow({each:function(i,e){return i.LaunchTracking.formExists(a.formData,function(a){a&&n(t.tabID,"Form still on page!")})}})}}function d(t){var a=l[t.tabID];a&&a.formSubmitted&&s(t)}function f(t){l[t.tabID]&&(l[t.tabID].hasFormWithPassword=!0,h(l[t.tabID].acc,"Form with password input found"))}function h(t,a){b&&console.log("%cApp: "+t.name+"%c "+a,"color: white; background: green","color: blue")}var l={},b=!1;return{isFeatureEnabled:i,startLaunchSite:e,startFillTracking:o,formSubmitted:u,getSubmitState:m,initiateFormExists:d,hasFormWithPassword:f}}(sendLpImprove);