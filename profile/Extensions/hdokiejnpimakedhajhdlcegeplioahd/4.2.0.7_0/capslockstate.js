!function(n){var t="unknown",e={init:function(e){var o=(n.extend({},e),!0===/MacPPC|MacIntel/.test(window.navigator.platform)),a={isCapslockOn:function(n){var e=!1;n.shiftKey?e=n.shiftKey:n.modifiers&&(e=!!(4&n.modifiers));var a=String.fromCharCode(n.which);return a.toUpperCase()===a.toLowerCase()||(a.toUpperCase()===a?!0===o&&e||(t=!e):a.toLowerCase()===a&&(t=e)),t},isCapslockKey:function(n){return 20===n.which&&"unknown"!==t&&(t=!t),t},hasStateChange:function(t,e){t!==e&&(n("body").trigger("capsChanged"),!0===e?n("body").trigger("capsOn"):!1===e?n("body").trigger("capsOff"):"unknown"===e&&n("body").trigger("capsUnknown"))}};return n("body").bind("keypress.capslockstate",function(n){var e=t;t=a.isCapslockOn(n),a.hasStateChange(e,t)}),n("body").bind("keydown.capslockstate",function(n){var e=t;t=a.isCapslockKey(n),a.hasStateChange(e,t)}),n(window).bind("focus.capslockstate",function(){var n=t;t="unknown",a.hasStateChange(n,t)}),a.hasStateChange(null,"unknown"),this.each(function(){})},state:function(){return t},destroy:function(){return this.each(function(){n("body").unbind(".capslockstate"),n(window).unbind(".capslockstate")})}};jQuery.fn.capslockstate=function(t){return e[t]?e[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void n.error("Method "+t+" does not exist on jQuery.capslockstate"):e.init.apply(this,arguments)}}(jQuery);