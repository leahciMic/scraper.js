function setupInputObserver(e){if(null==e&&(e=document),do_experimental_popupfill&&!function(e){return"undefined"!=typeof g_isfirefox&&g_isfirefox?e?e.g_did_setupInputObserver:null:g_did_setupInputObserver}(e)){var r="undefined"!=typeof window&&window?window:e.defaultView,t=null;if("undefined"!=typeof WebKitMutationObserver)t=new WebKitMutationObserver(function(e){setTimeout(function(){mutationObserverCallBack(e)},0)});else if("undefined"!=typeof MutationObserver);else{if(void 0===r.MutationObserver)return;if(e&&e.location&&e.location.href.indexOf(".xul"))return;t=new r.MutationObserver(function(e){setTimeout(function(){mutationObserverCallBack(e)},0)})}null!=t&&(t.observe(e,{childList:!0,subtree:!0}),function(e){if("undefined"!=typeof g_isfirefox&&g_isfirefox){if(!e)return!1;e.g_did_setupInputObserver=!0}else g_did_setupInputObserver=!0}(e))}}function mutationObserverCallBack(e){LPCTR("mutationObserver");var r=!1;if(e.forEach(function(e){g_isfirefox&&LP.getBrowser();var t;if(0==r)for(t=0;t<e.addedNodes.length;t++){var o=e.addedNodes[t];if(1===o.nodeType&&("INPUT"==o.tagName||o.getElementsByTagName("INPUT").length>0||"SCRIPT"==o.tagName&&""!=o.src&&""===o.innerHTML)){r=!0;break}}if(0==r)for(t=0;t<e.removedNodes.length;t++){var o=e.removedNodes[t];if(1===o.nodeType&&("INPUT"==o.tagName||o.getElementsByTagName("INPUT").length>0)){r=!0;break}}}),r)if(g_did_muto=!0,g_isfirefox){for(var t=LP.getBrowser(),o=t.contentWindow;null!=o.top&&o.top!=o;)o=o.top;var n=o.document,i=lpGetBrowserForDocument(n);verbose_log("mutation observer triggers checkShouldRecheck"),LP.checkShouldRecheck(i)}else{var f=LP_get_last_url_history(document);f.href!=get_doc_location_href(document)&&verbose_log("href changed from "+f.href+" to "+get_doc_location_href(document)),verbose_log("mutation observer triggers recheck, href = "+f.href+" hash = "+f.href_hash),g_pending_recheck||checkShouldRecheck({fromclick:!1,frommuto:!0,href:f.href,href_hash:f.href_hash})}}var g_did_setupInputObserver=!1,g_did_muto=!1,g_pending_recheck=!1,g_pending_eval=!1;