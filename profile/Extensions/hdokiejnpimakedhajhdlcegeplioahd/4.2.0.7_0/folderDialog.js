var FolderDialog=function(e){DialogWithGroupInput.call(this,e,{additionalHeaderClasses:["icon"],dynamicHeight:!0})};FolderDialog.prototype=Object.create(DialogWithGroupInput.prototype),FolderDialog.prototype.constructor=FolderDialog,FolderDialog.prototype.open=function(e){e=e||{},e.title="Add Folder",e.vaultItem&&(e.title="Rename Folder"),DialogWithGroupInput.prototype.open.call(this,e)},FolderDialog.prototype.initialize=function(){DialogWithGroupInput.prototype.initialize.apply(this,arguments),this.inputFields.groupParent.onChange(function(e){document.getElementById("folderDialogCreateSubFolder").checked=""!==e}),function(e){LPPlatform.addEventListener(document.getElementById("folderDialogCreateSubFolder"),"change",function(t){t.target.checked||e.inputFields.groupParent.clear()})}(this)},FolderDialog.prototype.setup=function(e,t){var r=document.getElementById("folderDialogCreateSubFolder");r.checked=!1,t.vaultItem instanceof SharedGroup?(r.setAttributeNode(document.createAttribute("disabled")),this.inputFields.groupParent.disable()):(r.removeAttribute("disabled"),this.inputFields.groupParent.enable()),DialogWithGroupInput.prototype.setup.apply(this,arguments)},FolderDialog.prototype.setGroupDropdownValues=function(e){e.unshift(""),LPTools.setSelectOptions(this.inputFields.groupParent.getNativeElement(),e)},FolderDialog.prototype.validate=function(e){var t=DialogWithGroupInput.prototype.validate.apply(this,arguments),r=e.groupName;if(e.groupParent&&(r=e.groupParent+"\\"+r),""===e.groupName)this.addError("groupName","Folder Name is required."),t=!1;else if(e.groupName.indexOf(SharedGroup.prototype.SHARED_FOLDER_NAME_PREFIX)>-1)this.addError("groupName",Strings.translateString("Sorry - group names starting with 'Shared-' are created by LastPass to indicate groups shared with other people. Please use a different name.")),t=!1;else{for(var o=LPProxy.getGroups(),a=0,i=o.length;a<i;++a)if(o[a].getName()===r){this.addError("groupName",Strings.translateString("That folder already exists.")),t=!1;break}e.groupName.indexOf("\\")>-1&&(this.addError("groupName",Strings.translateString("Folder name cannot contain backslashes.")),t=!1)}return t},FolderDialog.prototype.allowNoneGroup=function(e){return!1},FolderDialog.prototype.getGroupField=function(e){return"groupParent"},FolderDialog.prototype.add=function(e){(new Group).addFromDialog(e,e.groupParent?this.getGroup(e,!1):null)};var CreateSharedFolderDialog=function(e){Dialog.call(this,e,{additionalHeaderClasses:["icon"],dynamicHeight:!0,nextButtonText:"Create"})};CreateSharedFolderDialog.prototype=Object.create(Dialog.prototype),CreateSharedFolderDialog.prototype.constructor=CreateSharedFolderDialog,function(){CreateSharedFolderDialog.prototype.open=function(e){e=e||{},e.title=e.group?"Convert to Shared Folder":"Create New Shared Folder",e.group&&(e.defaultData={groupName:e.group.getName().replace("\\","-")}),Dialog.prototype.open.call(this,e)},CreateSharedFolderDialog.prototype.validate=function(e){var t=Dialog.prototype.validate.apply(this,arguments);if(""===e.groupName)this.addError("groupName","Folder Name is required."),t=!1;else{for(var r=SharedGroup.prototype.SHARED_FOLDER_NAME_PREFIX+e.groupName,o=LPProxy.getGroups(),a=0,i=o.length;a<i;++a){if(o[a].getName()===r){this.addError("groupName",Strings.translateString("That folder already exists.")),t=!1;break}}e.groupName.indexOf("\\")>-1&&(this.addError("groupName",Strings.translateString("Folder name cannot contain backslashes.")),t=!1)}return t},CreateSharedFolderDialog.prototype.getItemButtonActions=function(){return null},CreateSharedFolderDialog.prototype.setup=function(e,t){t.group?($("#createSharedFolderConvert").show(),$("#createSharedFolderNew").hide()):($("#createSharedFolderConvert").hide(),$("#createSharedFolderNew").show()),Dialog.prototype.setup.apply(this,arguments)},CreateSharedFolderDialog.prototype.handleSubmit=function(e){new SharedGroup({group:e.groupName}).add(this.data.group,this.data.children)}}();