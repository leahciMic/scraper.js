LPMessaging=function(e){var t=0,r={},n=0,a=function(e){var t={},r=!1;for(var n in e)if(e.hasOwnProperty(n)){var c=e[n];switch(typeof c){case"function":r=r||!0,t[n]=!0;break;case"object":t[n]=a(c),r=r||null!==t[n]}}return r?t:null},c=function(e){var t={};for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];switch(typeof n){case"function":t[r]=n,delete e[r];break;case"object":t[r]=c(n)}}return t},o=function(e){return e&&"object"==typeof e},u=function(e){return"[object Array]"===Object.prototype.toString.call(e)},s=function(e){if(o(e))switch(Object.prototype.toString.call(e)){case"[object Array]":return!1;case"[object Element]":return!0;case"[object Object]":return null!==Object.getPrototypeOf(Object.getPrototypeOf(e))}return!1},f=function(e){var t=u(e)?[]:{};if(!s(e))for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];t[r]=o(n)?f(n):n}return t},i=function(e){e.args=f(e.args);var t=a(e.args);if(t){var o=++n;r[o]=c(e.args),e.requestID=o,e.functions=t}},l=function(e,t){return i(t.data),e(t)},p=function(t){var n=r[t.responseRequestID];delete r[t.responseRequestID];for(var a=0,c=t.callbackPath.length;a<c;++a)n=n[t.callbackPath[a]];n.apply(e,t.args)},b=function(e,t,r){return function(n){for(var a={responseRequestID:t.requestID,callbackPath:r},c=[],o=0,u=arguments.length;o<u;++o)c.push(arguments[o]);a.args=c,i(a),e(a)}},v=function(e,t,r,n,a){a=a||[];for(var c in r){var o=r[c];switch(typeof o){case"object":v(e,t[c],o,n,a.concat(c));break;default:t[c]=b(e,n,a.concat(c))}}};return{handleRequest:function(e,t,r,n){var a=t.args;v(r,a,t.functions,t),LPReflection.callFunction(e,t.cmd,a,n)},makeRequest:l,handleResponse:p,getNewMessageSourceID:function(e){return++t}}}(this);