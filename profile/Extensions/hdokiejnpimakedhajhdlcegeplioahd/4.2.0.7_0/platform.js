LPPlatform={},function(){LPPlatform.lpIsExtension=function(){return!0},LPPlatform.openURL=function(e){bg.openURL(e)},LPPlatform.getBaseURL=function(){return bg.get("base_url")},LPPlatform.doAjax=function(e){$.ajax(e)},LPPlatform.ajax=function(e){bg.isOffline()?e.error&&e.error(null,null,"offline"):LPPlatform.doAjax(e)},LPPlatform.getOpenGroups=function(){var e=bg.localStorage_getItem(bg.db_prepend(bg.get("g_username_hash")+".savedtree"));if(null!==e){var o={};e=LPProxy.decrypt(e).split(",");for(var t=0,r=e.length;t<r;++t){var n=e[t];0===n.indexOf("_")&&(n=n.substring(1)),o[n]=!0}return o}return null},LPPlatform.setOpenGroups=function(e){for(var o=0,t=e.length;o<t;++o)e[o]="_"+e[o];var r=LPProxy.encrypt(e.join(","));bg.localStorage_setItem(bg.db_prepend(bg.get("g_username_hash")+".savedtree"),r)},LPPlatform.initialized=function(){return!0},LPPlatform.getHTML=function(e,o){$.ajax({url:e,success:o,dataType:"text"})},LPPlatform.loadedPreferences=function(){return LPTools.hasProperties(bg.get("g_userprefs"))},LPPlatform.openAttachment=function(e){bg.openAttach(e._parentNote.getID(),e.getID())},LPPlatform.saveAttachment=function(e){bg.exportAttachment(e._parentNote.getID(),e.getID())},LPPlatform.logException=function(e){var o="string"==typeof e?e:e.message;e.stack&&(o+="\n"+e.stack),LPPlatform.logError(o)},LPPlatform.logError=function(e){e="Page: "+window.location.href+" Error: "+e;try{console.error(e),bg.lpReportError("VAULT_4_0: "+e)}catch(e){}},LPPlatform.addEventListener=function(e){if(e){for(var o=[],t=1;t<arguments.length;++t)o.push(arguments[t]);e.addEventListener.apply(e,o)}},LPPlatform.removeEventListener=function(e){for(var o=[],t=1;t<arguments.length;++t)o.push(arguments[t]);e.removeEventListener.apply(e,o)},LPPlatform.handleAcctsIFrameLoaded=function(){},LPPlatform.canBackgroundOpenPopover=function(){return!0},LPPlatform.generateSharingKeys=function(e){bg.generateSharingKeys(e)},LPPlatform.getResourcePath=function(e){return e},LPPlatform.canPreventBlur=function(){return!0},LPPlatform.getBackgroundData=function(e){return e},LPPlatform.showIntroTutorial=function(){LPPlatform.openTour()},LPPlatform.setIntroTutorialDisable=function(e){return!1},LPPlatform.supportsBinary=function(){return!0},LPPlatform.openKeyboard=function(){bg.LPPlatform.openTabDialog("login",{virtualKeyboard:!0})},LPPlatform.getImportHandler=function(){return"importerHandler"},LPPlatform.showDownloader=function(){return!1},LPPlatform.optInToFamiliesDone=function(){},LPPlatform.openTour=function(e){LPRequire.requireJS(["lpPing","Tour/lpPingManager","Tour/introTourShade","Tour/introTourPreferences","Tour/FamilyOnboarding/familyOnboardingTour","Tour/OmarTour/omarMigrationTour","Tour/Vault41Tour/vault41Tour","Tour/introTourData","Tour/introTourFlow","Tour/introTourQueue","Tour/introTour"],function(){IntroTour&&IntroTour.start(e)})},LPPlatform.allowClipboardCopy=function(){return LPFeatures.allowClipboardCopy()}}(),function(e){e.getExtensionDropdownDelay=function(){return-1},e.closePopup=function(o){(o||0===Dialog.prototype.getDialogCount()&&0===LPDialog.getPendingCount())&&e.doClosePopup()},e.doClosePopup=function(){window.close()},e.closeTab=function(){window.close()},e.checkBrowserPasswordManager=function(e){},e.setupDropdownImportMenu=function(e){e.addClass("singleImportOption");var o=$("#importMenuItemMain");o.unbind("click"),o.bind("click",function(e){bg.lpevent("m_i"),bg.openimport()})},e.getUnavailablePreferences=function(){return{clearClipboardSecsVal:!bg.can_clear_clipboard(),openpopoverHk:!e.canBackgroundOpenPopover(),pollServerVal:bg.get("g_nopoll"),storeLostOTP:"0"===bg.get("g_prefoverrides").account_recovery,showvault:bg.get("g_hidevault")||bg.get("g_hideshowvault"),homeHk:bg.get("g_hidevault")||bg.get("g_hideshowvault"),saveallHk:bg.get("g_hidesaedhotkey"),searchHk:bg.get("g_hidesearch"),usepopupfill:!bg.get("g_offer_popupfill"),recentUsedCount:bg.get("g_hiderecentlyusedlistsize"),searchNotes:bg.get("g_hidenotes"),idleLogoffVal:!(bg.get("g_is_win")||bg.get("g_is_mac")||bg.get("g_is_linux")),enablenamedpipes:bg.get("lppassusernamehash")||!(bg.get("g_is_win")||bg.get("g_is_mac")||bg.get("g_is_linux"))||bg.is_chrome_portable(),enablenewlogin:!0,notificationsBottom:bg.get("LPContentScriptFeatures").new_save_site,showSaveSiteNotifications:bg.get("LPContentScriptFeatures").new_save_site}},e.getPreferencesRequiringBinary=function(){return{enablenamedpipes:!0}},e.handlePreferenceChanges=function(e){!1===e.storeLostOTP&&bg.DeleteOTP()},e.resizeTo=function(e,o){window.resizeTo(e,o)},e.openCreateAccount=function(){bg.LPPlatform.openTabDialog("createAccount")},e.showIntroTutorial=function(){var e=bg.get("LPContentScriptFeatures");if(bg.IntroTutorial.getTemporaryDisable()||LPProxy.isFamilyUser()||e&&"vault"!==e.intro_tutorial_version||"US"!==bg.get("countryfromip"))return void LPVault.openTour();var o=LPProxy.getModelCount();if(0===o){if(!LPProxy.getPreference("showIntroTutorial",!0))return void LPVault.openTour();1==bg.get("g_one_minute_inbox_importer_dialog_enabled")?dialogs.introTutorialInboxImporter.open():dialogs.introTutorialWelcome.open()}else 1===o&&bg.IntroTutorial.getState(function(e){e.enabled?(Topics.get(Topics.EXPAND_ALL).publish(),dialogs.introTutorialComplete.open({tutorialState:e})):LPVault.openTour()})},e.setIntroTutorialDisable=function(e){bg.IntroTutorial&&bg.IntroTutorial.setTemporaryDisable&&bg.IntroTutorial.setTemporaryDisable(e)},e.onLoad=function(){var e=!1;return Topics.get(Topics.INITIALIZED).subscribe(function(){e=!0}),function(o){e?o():Topics.get(Topics.INITIALIZED).subscribe(o)}}()}(LPPlatform);