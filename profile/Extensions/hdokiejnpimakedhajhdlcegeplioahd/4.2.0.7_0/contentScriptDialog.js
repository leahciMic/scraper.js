!function(){var t=Dialog,o=LPTools.getURLParams(),e=function(o,e){t.call(this,o,e),this.childDialogs=[],this.pendingAnimations=0};e.prototype=Object.create(Dialog.prototype),e.prototype.constructor=e,e.prototype.close=function(e){this.childDialogs.forEach(function(t){t.close(e)});var i=t.prototype.close.apply(this,arguments);return i&&(0===t.prototype.getDialogCount()&&0===LPDialog.getPendingCount()?csTop.LPFrame.close(o.dialogID):this.setFrameSize()),this.data.modal&&csTop.LPFrame.hideModal(),i},e.prototype.setFrameSize=function(t){csTop.LPFrame.css({id:o.dialogID,css:this.getSize(),callback:t&&t.callback})},e.prototype.addChildDialog=function(t){this.childDialogs.push(t),this.$element.append(t.$element)};var i=function(t){var o=t.getBoundingClientRect();return t=$(t),{top:o.top-parseInt(t.css("margin-top")),right:o.right+parseInt(t.css("margin-right")),bottom:o.bottom+parseInt(t.css("margin-bottom")),left:o.left-parseInt(t.css("margin-left"))}};e.prototype.getSize=function(){for(var t=$(".dialog:visible, .selectDropdownList:visible"),o=null,e=0;e<t.length;++e){var a=i(t[e]);null===o?o=a:(o.top=Math.min(o.top,a.top),o.right=Math.max(o.right,a.right),o.bottom=Math.max(o.bottom,a.bottom),o.left=Math.min(o.left,a.left))}return{"max-height":o?o.bottom-o.top:0,"max-width":o?o.right-o.left:0}},e.prototype.isOverlay=function(){return!1},e.prototype.requestAnimationFrame=function(t){var e=this,i=function(){++e.pendingAnimations,t(function(t){0===--e.pendingAnimations&&e.setFrameSize(t)})};0===this.pendingAnimations?csTop.LPFrame.css({id:o.dialogID,css:{"max-height":"none","max-width":"none"},callback:i}):i()},e.prototype.postSetup=function(){t.prototype.postSetup.apply(this,arguments),this.hide(),csTop.LPFrame.css({id:o.dialogID,css:{display:"block"},callback:this.createHandler(function(){this.showInitial()})})},e.prototype.showInitial=function(){this.show(),this.data.modal&&csTop.LPFrame.showModal(),this.data.fullScreen||csTop.LPFrame.css({id:o.dialogID,css:this.getSize()})},e.prototype.addPasswordEye=function(t){t.LP_addPasswordEye({checkPermissionHandler:this.checkViewPasswordHandler,includeGenerateButton:t.hasClass("generate"),textual:!0})};var a=$.extend({},Dialog.prototype);$.extend(Dialog.prototype,e.prototype),Dialog=e,t.prototype=a}();