function popupfill_shoulddofield(e,t,r){var n=["lpcurrpasselt","lpcurruserelt"];if(!do_experimental_popupfill)return!1;if(null==t||void 0===t.type||"hidden"==t.type)return!1;if("text"==t.type||"password"==t.type||"email"==t.type||!r&&"tel"==t.type||!r&&"url"==t.type||!r&&"textarea"==t.type){var a=LP_pickFieldName(e,t);if(lp_in_array(a,n))return decision_log(e,"DE28",{param1:a}),!1;if(is_search_field(e,t,!r))return!1;if(is_date_field(t))return!1;if(LP_looksLikeOTPField(e,t))return!1;if(LP_explicit_ignored(e,t))return!1;if(LP_implicit_ignored(e,t))return!1;if(LP_isCaptchaField(t))return!1;if(r){if(!chk_form_has_password(e,t.form)&&!checkDocumentForLoginOrphans(e)){if(verbose){var i=LP_pickFormName(e,t.form);decision_log(e,"DE29",{param1:i})}return!1}if(t.form&&is_shopping_form(e,t.form)&&g_aspx_hack&&(isASPpage()&&e.getElementsByTagName("form").length>2||!isASPpage()))return!1}return!0}return!1}function chk_form_ask_generate(e,t,r){var n=null;if(null==e||null==t||!function(e){return e&&e.tagName&&"FORM"==e.tagName.toUpperCase()}(t))return!1;var a,i=LP_pickFormName(e,t);if(r);else if(null!=(a=formcacheget(e,i,"ask_generate")))return a;if(void 0!==t.elements)var o=t.elements;else var o=t.getElementsByTagName("input");if(Checkpoint.assert(o.length<MAX_FORM_ELEMENTS_HARD,"form "+i+" has too many inputs"),o.length>MAX_FORM_ELEMENTS_HARD)return formcacheset(e,i,"is_login",!1),!1;try{e.location.href;var l=gettldcached(e.location.href)}catch(e){return!1}var s=0,c=0,f=3;r&&(f=2),g_aspx_hack&&isASPpage()&&(f=7);if("tumblr.com"==l&&(tumblr_action_btn=e.getElementById("signup_forms_submit"),null!=tumblr_action_btn)){var d,u=tumblr_action_btn.getElementsByTagName("SPAN");for(d=0;d<u.length;d++)if(u[d].className.indexOf("login_btn")>=0&&checkIsDisplayed(e,u[d],0,l))return!1}if(!checkIsDisplayed(e,t,0,l))return decision_log(e,"DE30"),!1;var _=LP_getname(t,LP_GETNAME_FAVOR_ID_OVER_NAME);if(null!=_&&(_.toLowerCase().indexOf("signup")>=0||_.toLowerCase().indexOf("register")>=0)&&-1==_.toLowerCase().indexOf("login"))return decision_log(e,"DE31",{param1:i}),formcacheset(e,i,"ask_generate",!0),!0;var p=!1;if("undefined"!=typeof Math){var m=Math.floor(1e4*Math.random()),g=0,h=0,v=0,y=null,P=t.elements.length;Checkpoint.assert(P<MAX_FORM_ELEMENTS_SOFT,"form "+i+" too big 1"),P>MAX_FORM_ELEMENTS_SOFT&&(P=MAX_FORM_ELEMENTS_SOFT);for(var L=0;L<P;L++){var E=t.elements[L];if("INPUT"==E.tagName&&("password"==E.type?g++:"text"!=E.type&&"email"!=E.type||h++),("INPUT"==E.tagName&&"submit"==E.type||"BUTTON"==E.tagName)&&(v++,y=E,v>10&&t.elements.length>MAX_FORM_ELEMENTS_SOFT))return!1}if(1==v&&h<=2&&g>0&&checkButtonHint(y))return decision_log(e,"DE32"),!1;for(var o=t.elements,L=0;L<MAX_FORM_ELEMENTS_SOFT&&L<o.length;L++){var E=o[L];if(p=!1,"FIELDSET"!=E.tagName&&valid_by_role(e,E)&&!LP_fieldIsDisabled(E)&&!LP_treat_as_hidden(E)&&("expedia.com"==l||checkIsDisplayed(e,E,0,l,m))&&(!g_use_wacky_disp||is_wacky_disp(e,E))){if("text"==E.type&&is_watermark(E.className)&&is_watermark_password(E))try{E.type="password"}catch(e){p=!0}var x=LP_elt_get_text(E);if(("BUTTON"==E.tagName&&"submit"==E.type&&null!=x&&x.indexOf("Create")>=0||"BUTTON"==E.tagName&&"submit"==E.type&&null!=x&&x.indexOf("Register")>=0||"INPUT"==E.tagName&&"submit"==E.type&&null!=E.value&&E.value.indexOf("Create")>=0||"INPUT"==E.tagName&&"submit"==E.type&&null!=E.value&&E.value.indexOf("Register")>=0||"INPUT"==E.tagName&&"submit"==E.type&&null!=E.value&&E.value.indexOf("Sign me up")>=0||"INPUT"==E.tagName&&"image"==E.type&&null!=E.value&&"create"==E.value)&&(f=2,decision_log(e,"DE33",{param1:i})),g>1&&LP_passwordAlt(e,E))c++;else{var k=fieldIsDoublePassword(e,E);if(!(t&&"form1"==t.id&&t.action&&"string"==typeof t.action&&t.action.indexOf(".aspx")&&"text"==E.type&&(k===DOUBLE_PW_VISIBLE||k===DOUBLE_SECRET_PW_VISIBLE)||do_bgiconinput&&"text"==E.type&&(k===DOUBLE_TEXT_VISIBLE||k===DOUBLE_SECRET_TEXT_VISIBLE))){if("password"==E.type||p||"text"==E.type&&k===DOUBLE_TEXT_VISIBLE||"text"==E.type&&k===DOUBLE_SECRET_TEXT_VISIBLE){var b=E.getAttribute("placeholder");if(null!=b&&b.indexOf("Create your")>=0&&(!0,f=2),"facebook.com"==l&&"string"==typeof E.id&&E.id.match(/^[a-z0-9]{6}_\d{1,2}_ci_password$/))continue;if("tdbank.com"==l&&"string"==typeof E.name&&"user"==E.name){c++;continue}if(0==s&&g>1&&passwordIsFake(E)){c++;continue}if(s>0&&g>1&&LP_looksLikeOTPField(e,E)){c++;continue}LP_get_input_pattern(e,E)&&!n&&(n=E),s++}else if("email"==E.type||"text"==E.type||"textarea"==E.type||"tel"==E.type||"url"==E.type)if(treat_text_as_password(E))s++;else{if(LP_isForgetField(E))continue;if(lpIsVisible(E,!0)){var N=LP_pickFieldName(e,E);LP_looksLikeOTPField(e,E)?decision_log(e,"DE35",{param1:N}):c++}}if(s>=4||c>=100)return s>=4&&decision_log(e,"DE37",{param1:i,param2:s,param3:c}),c>=100&&decision_log(e,"DE38",{param1:i,param2:s,param3:c}),formcacheset(e,i,"ask_generate",!1),!1;if(s>=2||s>=1&&c>=f)return s>=2&&decision_log(e,"DE39",{param1:i,param2:s,param3:c}),s>=1&&c>=f&&decision_log(e,"DE40",{param1:i,param2:s,param3:c}),formcacheset(e,i,"ask_generate",!0),n&&(g_isie||g_isfirefox||sendBG_generate_pattern(e,n)),!0}}}}return decision_log(e,"DE41",{param1:i,param2:s,param3:c}),formcacheset(e,i,"ask_generate",!1),!1}}function passwordIsFake(e){var t=new RegExp("(?:Account)|(?:Member)|(?:IUO_NAME)","i"),r=e.id,n=e.name;return!(!t.exec(r)&&!t.exec(n))}function checkButtonHint(e){if(!e)return!1;var t=e.id,r="INPUT"==e.tagName?e.value:e.innerHTML,n=new RegExp("(?:Login)|(?:Log.In)|(?:Logon)|(?:Log.on)","i");return!(!n.exec(t)&&!n.exec(r))}function LP_isForgetField(e){if(!e)return!1;var t=e.id,r=e.name,n=new RegExp(lpgs("ff_forgot_regexp"),"i");return!(!n.exec(t)&&!n.exec(r))}function LP_isCaptchaField(e){if(!e)return!1;var t=e.id,r=e.name,n=new RegExp(lpgs("ff_captcha_regexp"),"i");return!(!n.exec(t)&&!n.exec(r))}function element_is_detached(e,t,r){if(!t)return!1;if(!e&&!(e=t.ownerDocument))return!1;void 0===r&&(r=0);var n=null;try{r>15&&(n=!1),null==t.parentNode&&(n=!0),t.parentNode!==e.documentElement&&t.parentNode!==t.ownerDocument.documentElement||(n=!1)}catch(e){n=!0}return null==n?element_is_detached(e,t.parentNode,r+1):n}function get_javaservlet_fields(e,t){if(!e)return[];void 0!==t&&null!==t||(t=!1);var r=[],n=e.getElementsByName("j_username"),a=e.getElementsByName("j_password");if(1===n.length&&1===a.length)Checkpoint.assert(n[0].form===a[0].form,"javaservlet form mismatch"),r=[n[0],a[0]];else if(!t||1!==n.length&&1!==a.length){var i=e.getElementsByTagName("FORM"),o=LP_getFormsThreshold(e);Checkpoint.assert(i.length<o,"too many forms on page");for(var l=0;l<o&&l<i.length;l++)if(i[l].action&&void 0!==i[l].action.indexOf&&i[l].action.indexOf("j_security_check")>=0){var s=form_get_username(e,i[l]),c=form_get_password(e,i[l]);s&&c&&(r=[s,c]);break}}else{var s=null,c=null;1===n.length&&(s=n[0]),1===a.length&&(c=a[0]),r=[s,c]}return r}function is_random_hashstr(e){return!!e&&(!(16!=e.length&&32!=e.length||!e.match(/^[a-zA-Z0-9]+$/)||e==e.toLowerCase()||!e.match(/[0-9]/)||e==e.toUpperCase())||(!(32!=e.length||!e.match(/^[a-f0-9]+$/))||(!!e.match(/_\d{18}[A-Z]{4}_/)||(!(17!=e.length||"a"!=e.charAt(0)||!e.match(/^[a-zA-Z0-9_]+$/)||e==e.toLowerCase()||!e.match(/[0-9]/)||e==e.toUpperCase())||(!!(20==e.length&&e.match(/^[A-Z]0[A-F]\d{16}[A-Z]$/)||21==e.length&&e.match(/^[A-Z]0[A-F]\d{17}[A-Z]$/))||(!(18!=e.length||!e.match(/^el[0-9a-f]{16}$/))||(!!(e.length>24&&e.match(/^yui_[0-9_a-z]+$/))||!!(e.length>=14&&e.match(/^[a-zA-Z_]{8}[a-zA-Z_]+\[[0-9]{2}[0-9]+\]$/)))))))))}function chk_form_changepw_new(){return!0}function shouldOfferGenerate(e,t){if(null==e||null==t)return null;var r=!1,n=t.form,a=!1;n||(a=checkDocumentForCPWOrphans(e));var i=!0,o=!0,l=check_nevers(e,g_nevers,e.location.href);if(null!=l&&(i=l.show_for_generate,o=l.show_for_clickable_icon),i&&chk_form_ask_generate(e,n)&&isInputFieldPassword(e,t)&&o){if(chk_form_has_password(e,n)){var s=LP_pickFormName(e,n);if(new RegExp(lpgs("ff_loginform_regexp"),"i").exec(s))return!1}if(currentpw=lpCheckCurrentPWField(n),!currentpw){currentpw=lpCheckCurrentPWField(n,!0)}chk_form_changepw(e,n)&&t==lpCheckCurrentPWField(n)?(r=!1,"undefined"!=typeof g_docnum&&decision_log(e,"DE42",{param1:g_docnum,param2:LP_pickFormName(e,n),param3:LP_pickFieldName(e,t)})):chk_form_changepw_new(e,n)&&t==currentpw?(r=!1,"undefined"!=typeof g_docnum&&decision_log(e,"DE43",{param1:g_docnum,param2:LP_pickFormName(e,n),param3:LP_pickFieldName(e,t)})):(r=!0,"undefined"!=typeof g_docnum&&decision_log(e,"DE44",{param1:g_docnum,param2:LP_pickFormName(e,n),param3:LP_pickFieldName(e,t)}))}else!n&&i&&a&&isInputFieldPassword(e,elt)&&!lpIsFieldCurrentPWField(t)&&(r=!0,"undefined"!=typeof g_docnum&&decision_log(e,"DE45",{param1:g_docnum,param2:LP_pickFieldName(e,t)}));return r}function popupfill_shoulddoform(e,t){if(e||(e=LP_derive_doc()),!e)return!1;if(!t)return!1;var r=t.name,n=t.id,a=["lpmanualform","lpwebsiteeventform"];return(!r||!lp_in_array(r,a))&&(!n||!lp_in_array(n,a))}function LP_isRememberCheckbox(e){if(!e)return!1;if("checkbox"!=e.type)return!1;var t=e.id,r=e.name,n=new RegExp(lpgs("ff_remember_regexp"),"i");return!(!n.exec(t)&&!n.exec(r))}function chk_form_is_nonlogin_form(e,t){if(null==e||null==t||!function(e){return e&&e.tagName&&"FORM"==e.tagName.toUpperCase()}(t))return!1;try{var r=gettldcached(e.location.href)}catch(e){return!1}var n=LP_pickFormName(e,t),a=formcacheget(e,n,"is_nonlogin");if(null!=a)return a;if(void 0!==t.elements)var i=t.elements;else var i=t.getElementsByTagName("input");if(Checkpoint.assert(i.length<MAX_FORM_ELEMENTS_HARD,"form "+n+" has too many inputs"),i.length>MAX_FORM_ELEMENTS_HARD)return formcacheset(e,n,"is_nonlogin",!0),!0;if(is_search_form(e,t))return decision_log(e,"DE46",{param1:n}),formcacheset(e,n,"is_nonlogin",!1),!1;if(!checkIsDisplayed(e,t,0,r))return decision_log(e,"DE47",{param1:n}),!1;var o=0,l=0,i=t.elements,s=i.length;Checkpoint.assert(s<MAX_INPUTS_HARD,"form "+n+" too big 2"),s>MAX_INPUTS_HARD&&(s=MAX_INPUTS_HARD);for(var c=0;c<s;c++){var f=i[c];if("FIELDSET"!=f.tagName&&("email"==f.type||"text"==f.type||"password"==f.type)){if(LP_fieldIsDisabled(f))continue;if(++l>100)return formcacheset(e,n,"is_nonlogin",!1),!1;if(1==f.disabled)continue;if(!valid_by_role(e,f))continue;if(!lpIsVisible(f))continue;if(LP_treat_as_hidden(f))continue;if(is_search_field(e,f,!0)&&i.length<8)return decision_log(e,"DE48",{param1:n}),formcacheset(e,n,"is_nonlogin",!1),!1;if(++o>=3)return decision_log(e,"DE49",{param1:n}),formcacheset(e,n,"is_nonlogin",!0),!0}}return formcacheset(e,n,"is_nonlogin",!1),!1}function treat_text_as_password(e){if(!e)return!1;if("TEXTAREA"==e.tagName)return!1;if("text"==e.type&&(0==e.name.indexOf("pass")||e.name.toLowerCase().indexOf(lpgs("Password").toLowerCase())>=0)&&-1==e.name.toLowerCase().indexOf("hint")&&-1==e.name.toLowerCase().indexOf("placeholder")){return!(new RegExp(lpgs("ff_username_regexp"),"i").exec(e.name)&&e.form&&e.form.action&&e.form.action.indexOf("login")>=0)}return!1}function ASP_treat_text_as_password(e){return treat_text_as_password(e)}function valid_by_role(e,t){if(!t)return!1;if(e||(e=t.ownerDocument),!e)return!1;var r=t.getAttribute("role");if(r||"INPUT"==t.tagName||(r=t.parentNode.getAttribute("role")),!r)return!0;switch(r){case"navigation":case"banner":case"contentinfo":case"note":case"search":case"seealso":return!1;case"columnheader":case"presentation":case"toolbar":case"directory":return!1;default:return!0}}function should_do_lastpass_here(e){var t=null;if(!e)return!1;if(null!=e.g_content_check_result)return e.g_content_check_result;try{var r=e.location.href;if((r.indexOf(".xul")>0||r.indexOf("libsyn.com/embed")>0||r.indexOf("platform.twitter.com/tweet_button")>0||r.indexOf("facebook.com/plugins/")>=0)&&(e.g_content_check_result=!1,t=!1),null===t&&"complete"!=e.readyState&&"interactive"!=e.readyState&&(verbose_log("answer hazy, try again later"),t=!0),null===t){var n=e.body,a=(e.head,LP_elt_get_text(n).length);null===t&&a>2&&is_page_JSON(e)&&(e.g_content_check_result=!1,t=!1)}if(null===t&&n){var i=n.getAttribute("contentEditable"),o=n.getAttribute("preview"),l=null!==n.getAttribute("data-silex-id")||null!==n.getAttribute("data-silex-type");("edit"==o||i||l)&&(t=!1)}}catch(t){return e.g_content_check_result=!1,!1}return null===t&&(e.g_content_check_result=!0,t=!0),t}function is_shopping_form(e,t){if(e||(e=LP_derive_doc()),!e||!t)return!1;var r=LP_createXPathFromElement(e,t);r||(r=LP_pickFormName(e,t));var n=formcacheget(e,r,"is-shopping");if(null!=n)return n;var a=!1,i=0,o=0,l=0,s=0,c=0,f=0,d=new RegExp("qty|quantity","i"),u=new RegExp("[Ss]hipping"),_=new RegExp("[Ss]hopping|[CcK]art"),p=new RegExp("gift|Gift|GIFT"),m=new RegExp("[Cc]heck[Oo]ut"),g=t.getElementsByTagName("input");Checkpoint.assert(g.length<MAX_INPUTS_SOFT,"form "+LP_getname(t)+" has too many inputs");var h=g.length;for(h>MAX_INPUTS_SOFT&&(h=MAX_INPUTS_SOFT),f=0;f<h;f++){var v=g[f].id,y=g[f].name,P=g[f].className;if(d.exec(v)||d.exec(y)||d.exec(P))i++;else if(u.exec(v)||u.exec(y)||u.exec(P))l++;else if(_.exec(v)||_.exec(y)||_.exec(P))o++;else if(p.exec(v)||p.exec(y)||p.exec(P))s++;else if(m.exec(v)||m.exec(y)||m.exec(P))c++;else if(function(e,t,r,n,a){var i,o=0,l=[e,t,r,n,a];for(i=0;i<l.length;i++)l[i]>0&&o++;return o>=2}(i,o,l,s,c)){a=!0;break}}return formcacheset(e,r,"is-shopping",a),a}function is_wacky_disp(e,t){if(e||(e=LP_derive_doc()),!e||!t)return!1;if(t==e.body)return!0;var r=("undefined"!=typeof window&&window?window:e.defaultView,!0);try{var n=LP_get_live_style(t);if(n&&("none"!=n.display&&"hidden"!=n.visibility||(r=!1),1!=r||t.offsetHeight&&t.offsetHeight||(r=!1),1!=r||0!=n.height&&0!=n.width||(r=!1),1==r&&(parseInt(n.height)<2||parseInt(n.width)<2)&&(r=!1),1==r&&(parseInt(n.left)<0&&"auto"!=n.left||parseInt(n.top)<0&&"auto"!=n.top)&&(r=!1),1==r&&"-1px"==n.marginTop&&1==t.offsetHeight&&(r=!1),1==r&&(t.offsetHeight<3||t.offsetWidth<3)&&(r=!1),1==r&&("transparent"==n.backgroundColor&&"transparent"==n.color||g_isie&&"transparent"==n.backgroundColor&&""==n.color||"rgba(0, 0, 0, 0)"==n.backgroundColor&&"rgba(0, 0, 0, 0)"==n.color)&&(r=!1),1==r&&n.opacity&&parseFloat(n.opacity)<.02&&(r=!1),1==r&&g_isie&&n.filter)){var a=new RegExp("alpha\\(opacity=(\\d+)\\)"),i=a.exec(n.filter);i&&i[1]&&parseInt(i[1])<2&&(r=!1)}}catch(e){r=!0}if(r)try{var o=t.parentNode;o||(r=!1);var l=LP_get_live_style(o);l&&(1!=r||"none"!=l.display&&"hidden"!=l.visibility||(r=!1),1==r&&(parseInt(l.left)<0&&"auto"!=l.left||parseInt(l.top)<0&&"auto"!=l.top)&&(r=!1),1!=r||!(parseInt(l.height)<3&&"auto"!=l.height||parseInt(l.width)<3&&"auto"!=l.width)||"hidden"!=l.overflowY&&"hidden"!=l.overflow||(r=!1))}catch(e){r=!0}return r}function LP_treat_as_hidden(e){if(!e)return!0;if("hidden"==e.type)return!0;if(!e.parentNode)return!0;if(0==e.id.indexOf("hidden")&&("none"==e.style.display||"none"==e.parentNode.style.display))return!0;if("true"===e.getAttribute("aria-hidden"))return!0;var t=e.getAttribute("hidden");return!(!t||"false"===t)}function LP_has_textlike_type(e){if(!e)return!1;var t=e.tagName.toUpperCase();if("INPUT"!=t&&"TEXTAREA"!=t)return!1;if("TEXTAREA"==t)return!0;var r,n=["text","number","email","tel","url","textarea"];for(r in n)if(n.hasOwnProperty(r)&&e.type==n[r])return True;return False}function computeFingerprint(e){if(!e)return"";var t,r="",n=e.getElementsByTagName("INPUT");for(t=0;t<n.length&&t<20;t++){r+=n[t].id?n[t].id:n[t].name}try{"undefined"!=typeof crc32&&(r=crc32(r).toString())}catch(e){}return r}function LP_firstVisibleOrphan(e){if(!e)return null;var t,r=e.getElementsByTagName("INPUT"),n=null;for(t=0;t<r.length&&t<50;t++)if(n=r[t],!n.form&&("text"==n.type||"password"==n.type||"url"==n.type||"email"==n.type)&&lpIsVisible(n))return n;return null}function checkFormForLoginFirstStage(e,t){if(null==e||null==t||"FORM"!=t.tagName)return!1;var r=LP_pickFormName(e,t);verbose_log("checking "+r+" for first stage of multi-stage login");var n=formcacheget(e,r,"multi-first");if(null!=n)return n;if("undefined"==typeof Math)return False;for(var a,i=0,o=!1,l=Math.floor(1e4*Math.random()),s=0,c=0;c<20&&c<t.elements.length;c++){var a=t.elements[c];if("INPUT"==a.tagName){if(!checkIsDisplayed(e,a,0,null,l))continue;if(looksLikeUsername(a)&&i++,"text"==a.type||"tel"==a.type||"url"==a.type||"email"==a.type||"textarea"==a.type){if("string"==typeof a.id&&"identifier-captcha-input"==a.id)try{if("google.com"==gettldcached(e.location.href))continue}catch(e){}s++}if(isInputFieldPassword(e,a)){o=!0;break}if(i>=2)break;if(s>=2)break}}return i>0&&i<=3&&0==o&&s<2?(verbose_log("isolated login field/initial stage of multi-stage found"),formcacheset(e,r,"multi-first",!0),!0):(formcacheset(e,r,"multi-first",!1),!1)}function checkDocumentForLoginFirstStageForm(e){if(!e)return!1;var t=LP_getFormsThreshold(e),r=e.getElementsByTagName("form");Checkpoint.assert(r.length<t,"too many forms on page");for(var n=!1,a=0;a<r.length&&a<t;a++)if(n=checkFormForLoginFirstStage(e,r[a]))return n;return!1}function checkDocumentForNonLoginOrphans(e){if(null==e)return!1;var t=formcacheget(e,"fakedoc","orphan-signup"),r=formcacheget(e,"fakedoc","orphan-registration"),n=formcacheget(e,"fakedoc","orphan-cc"),a=t||r||n;if(null!=a)return a;var i=new RegExp(lpgs("ff_firstname_regexp"),"i"),o=new RegExp(lpgs("ff_lastname_regexp"),"i"),l=new RegExp(lpgs("ff_cctype_regexp"),"i"),s=(new RegExp(lpgs("ff_address1_regexp"),"i"),new RegExp(lpgs("ff_forgot_regexp"),"i"),new RegExp(lpgs("ff_remember_regexp"),"i"),!1),c=!1,f=!1,d=!1,u=!1;try{gettldcached(e.location.href)}catch(e){return!1}for(var _=0,p=e.getElementsByTagName("INPUT"),m=0;m<p.length&&m<20;m++){var g=p[m];if("INPUT"==g.tagName){if(LP_isRememberCheckbox(g)&&lpIsVisible(g)&&!LP_fieldIsDisabled(g)&&_++,"email"==g.type||"text"==g.type||"password"==g.type){if(LP_fieldIsDisabled(g))continue;if(LP_fieldIsDisabled(g))continue;if(!valid_by_role(e,g))continue;if(!lpIsVisible(g))continue;if(is_search_field(e,g,!0))continue;var h=g.name,v=g.id?g.id:"",y=lpGetTextBeforeFormField(g);looksLikeUsername(g)?s=!0:isInputFieldPassword(e,g)?c=!0:i.exec(v)||i.exec(h)||i.exec(y)?f=!0:o.exec(v)||o.exec(h)||o.exec(y)?d=!0:l.exec(v)||l.exec(h)||l.exec(y)?u=!0:(regexp_address1.exec(v)||regexp_address1.exec(h)||regexp_address1.exec(y))&&!0,_++}if(_>=3){if(s&&c&&!u)return verbose_log("document appears to be have orphan signup fields"),formcacheset(e,"fakedoc","orphan-signup",!0),formcacheset(e,"fakedoc","orphan-cc",!1),formcacheset(e,"fakedoc","orphan-registration",!1),!0;if(u&&!s&&!c)return verbose_log("document appears to be have orphan credit card fields"),formcacheset(e,"fakedoc","orphan-cc",!0),formcacheset(e,"fakedoc","orphan-signup",!1),formcacheset(e,"fakedoc","orphan-registration",!1),!0;if((f||d)&&s)return verbose_log("document appears to be have orphan registration fields"),formcacheset(e,"fakedoc","orphan-registration",!0),formcacheset(e,"fakedoc","orphan-signup",!1),formcacheset(e,"fakedoc","orphan-cc",!1),!0}}}return formcacheset(e,"fakedoc","orphan-signup",!1),formcacheset(e,"fakedoc","orphan-cc",!1),formcacheset(e,"fakedoc","orphan-registration",!1),!1}function checkDocumentHasOrphanSignup(e){if(!e)return!1;var t=formcacheget(e,"fakedoc","orphan-signup");return null!=t?t:(checkDocumentForNonLoginOrphans(e),formcacheget(e,"fakedoc","orphan-signup"))}function checkDocumentHasOrphanCC(e){if(!e)return!1;var t=formcacheget(e,"fakedoc","orphan-cc");return null!=t?t:(checkDocumentForNonLoginOrphans(e),formcacheget(e,"fakedoc","orphan-cc"))}function checkDocumentHasOrphanRegistration(e){if(!e)return!1;var t=formcacheget(e,"fakedoc","orphan-registration");return null!=t?t:(checkDocumentForNonLoginOrphans(e),formcacheget(e,"fakedoc","orphan-registration"))}function LP_should_ignore_this_doc(e,t){if(!e)return!0;if(!e.location)return!0;var r=e.location.href;return!(!LP_is_browser_url(r)&&0!=r.indexOf("javascript:"))||(r.indexOf(".xul")>0||!(!t||"www.irccloud.com"!=e.location.hostname))}function countInputs(e,t,r){var n=0,a=0,i=e.getElementsByTagName("INPUT");if("undefined"!=typeof Math){for(var o=0;o<i.length;o++){if(o>100){t||(n+=i.length-o);break}var l="password"==i[o].type;t&&!l||"checkbox"!=i[o].type&&"hidden"!=i[o].type&&(l&&a++,n++)}return r&&(e.g_password_cnt=a),n}}function checkForLoginForm(e){if(e||(e=LP_derive_doc()),!e)return!1;try{gettldcached(e.location.href)}catch(e){return!1}var t=LP_getFormsThreshold(e),r=e.getElementsByTagName("form");Checkpoint.assert(r.length<t,"too many forms on page");for(var n=!1,a=0;a<r.length&&a<t;a++){if(null==(n=chk_form_has_password(e,r[a],!0)))return!1;if(n)return n}return!1}function checkForNonLoginForm(e){if(e||(e=LP_derive_doc()),!e)return!1;try{gettldcached(e.location.href)}catch(e){return!1}var t=LP_getFormsThreshold(e),r=e.getElementsByTagName("form");Checkpoint.assert(r.length<t,"too many forms on page");for(var n=!1,a=0;a<r.length&&a<t;a++)if(n=chk_form_is_nonlogin_form(e,r[a]))return n;return!1}function checkForSignupForm(e){if(e||(e=LP_derive_doc()),!e)return!1;var t=LP_getFormsThreshold(e),r=e.getElementsByTagName("form");Checkpoint.assert(r.length<t,"too many forms on page");for(var n=!1,a=0;a<r.length&&a<t;a++)if(n=chk_form_ask_generate(e,r[a]))return n;return!1}function usercacheset(e,t){if(null==e||null==t||0===t.length)return!1;var r=gettldcached(e.location.href);return"function"==typeof sendBG&&sendBG({cmd:"usercacheset",tld:r,username:t}),verbose_log("USERCACHE-SAVED  domain: "+r+" user: "+t),!0}function checkForTotpForm(e,t){if("undefined"==typeof g_do_totp||!g_do_totp||g_totp_elt)return!1;if(e||(e=LP_derive_doc()),!e)return!1;try{gettldcached(e.location.href)}catch(e){return!1}verbose_log("checkForTotpForm called from "+t);var r=LP_getFormsThreshold(e),n=e.getElementsByTagName("form");Checkpoint.assert(n.length<r,"too many forms on page");for(var a=!1,i=0;i<n.length&&i<r;i++){if(null==(a=chk_form_has_totp(e,n[i],!0)))return!1;if(a)return verbose_log("checkForTotpForm FOUND totp form - called from "+t),a}return!1}function chk_form_has_totp(e,t,r){function n(e){return null===e.offsetParent}if("undefined"==typeof g_do_totp||!g_do_totp||g_totp_elt)return!1;if(null==e||null==t||!function(e){return e&&e.tagName&&"FORM"==e.tagName.toUpperCase()}(t))return!1;LP_pickFormName(e,t);if(void 0!==t.elements)var a=t.elements;else var a=t.getElementsByTagName("input");if(a.length>=MAX_FORM_ELEMENTS_HARD)return!1;var i=0;verbose_log("checking form: id-> "+t.id+"  class-> "+t.className+" name-> "+t.name),i+=textFieldScore(t,"totp"),i+=textFieldScore(t,"2fa"),i+=textFieldScore(t,"twofactor"),i+=textFieldScore(t,"tfa"),verbose_log("form score: ( id-> "+t.id+"  class-> "+t.className+" name-> "+t.name+" )   "+i);for(var o=0,l=0,s=0;s<MAX_FORM_ELEMENTS_SOFT&&s<t.elements.length;s++){var c=t.elements[s];"INPUT"==c.tagName&&("text"!=c.type&&"tel"!=c.type&&"number"!=c.type||o++),("INPUT"==c.tagName&&"submit"==c.type||"BUTTON"==c.tagName)&&l++}if(verbose_log("check for totp form: txtfieldcount="+o+" submitcnt="+l),0==l||0==o)return!1;for(var s=0;s<MAX_FORM_ELEMENTS_SOFT&&s<a.length;s++){var c=a[s];if(isInputFieldTotpCode(e,c))if(i+=2,n(c)){verbose_log("HIDDEN totp element found: id-> "+c.id+"  class-> "+c.className+"  name-> "+c.name);var f,d=function(t){if(verbose_log("checking visibility for: id-> "+t.id+"  class-> "+t.className+"  name-> "+t.name),!n(t))return clearInterval(f),verbose_log("element become VISIBLE - totp code field revealed!!!!!: id-> "+t.id+"  class-> "+t.className+"  name-> "+t.name),void found_totp_elt(t,e);verbose_log("element is STILL HIDDEN: id-> "+t.id+"  class-> "+t.className+"  name-> "+t.name)},u=c;f=setInterval(function(){d(u)},5e3)}else found_totp_elt(c,e),verbose_log("VISIBLE totp element found!!!!!: id-> "+c.id+"  class-> "+c.className+"  name-> "+c.name)}return verbose_log("form totp score: "+i+"+id-> "+t.id+"  class-> "+t.className+" name-> "+t.name),i>=2}function found_totp_elt(e,t){if(verbose_log("found totp elt"),g_totp_elt)return void verbose_log("already found totp elt, returning");g_totp_elt=e,"undefined"!=typeof g_can_get_totp&&g_can_get_totp?"function"==typeof sendBG&&(verbose_log("attempting to get totp from server"),sendBG({cmd:"get_totp",tld:gettldcached(t.location.href),name:e.name,id:e.id,className:e.className})):(verbose_log("set totp form"),g_totp_form=e.form)}function chk_form_has_password(e,t,r){if(null==e||null==t||!function(e){return e&&e.tagName&&"FORM"==e.tagName.toUpperCase()}(t))return!1;var n=LP_pickFormName(e,t),a=formcacheget(e,n,"is_login");if(null!=a)return a;if(void 0!==t.elements)var i=t.elements;else var i=t.getElementsByTagName("input");if(Checkpoint.assert(i.length<MAX_FORM_ELEMENTS_HARD,"form "+n+" has too many inputs"),i.length>MAX_FORM_ELEMENTS_HARD)return formcacheset(e,n,"is_login",!1),!1;try{var o=gettldcached(e.location.href);if("bankofamerica.com"==o){var l=e.getElementById("tlpvt-passcode-input");null!==l&&l.removeAttr("disabled")}if("google.com"==o&&is_google_signin_v2(e,i))return!0}catch(e){return!1}for(var s=!1,c=0,f=0,d=0,u=null,_=0;_<MAX_FORM_ELEMENTS_SOFT&&_<t.elements.length;_++){var p=t.elements[_];"INPUT"==p.tagName&&("password"==p.type?c++:"text"!=p.type&&"email"!=p.type||f++),("INPUT"==p.tagName&&"submit"==p.type||"BUTTON"==p.tagName)&&(d++,u=p)}if(verbose_log("check for login form: prelimtxt="+f+" prelimpw="+c),1==d&&f<=2&&c>0&&checkButtonHint(u))return!0;for(var m=0,g=0,h=!lpIsVisible(t),v=!1,i=t.elements,_=0;_<MAX_FORM_ELEMENTS_SOFT&&_<i.length;_++){var p=i[_];if(s=!1,"FIELDSET"!=p.tagName&&(check_for_ASP(e,p),valid_by_role(e,p)&&!LP_fieldIsDisabled(p)&&!LP_treat_as_hidden(p))){if("text"==p.type&&is_watermark(p.className)&&is_watermark_password(p))try{p.type="password",decision_log(e,"DE11")}catch(e){s=!0}if(ASP_treat_text_as_password(p)&&(s=!0),(s||"password"==p.type)&&LP_get_input_pattern(e,p),c>1&&LP_passwordAlt(e,p))g++;else{var y=fieldIsDoublePassword(e,p);if("text"!=p.type||y!==DOUBLE_PW_VISIBLE&&y!==DOUBLE_SECRET_PW_VISIBLE)if("password"==p.type||s||"text"==p.type&&y===DOUBLE_TEXT_VISIBLE||"text"==p.type&&y===DOUBLE_SECRET_TEXT_VISIBLE){if("facebook.com"==o&&"string"==typeof p.id&&p.id.match(/^[a-z0-9]{6}_\d{1,2}_ci_password$/))continue;if("tdbank.com"==o&&"string"==typeof p.name&&"user"==p.name){g++;continue}if(g_fillaid&&r)return!0;if(g_aspx_hack&&isASPpage()&&do_bgiconinput)decision_log(e,"DE12");else if(!lpIsVisible(p)||g_use_wacky_disp&&!is_wacky_disp(e,p)){if(v=!0,!h)continue;decision_log(e,"DE13",{param1:LP_pickFormName(e,p)})}if(0==m&&c>1&&passwordIsFake(p)){g++;continue}if(m>0&&c>1&&LP_looksLikeOTPField(e,p)){g++;continue}var P=2,L="";if(g_aspx_hack&&isASPpage()&&do_bgiconinput&&(P=4,L=" [ASP]"),++m>=P){if(2==c&&0===f&&1===d){var E=new RegExp(lpgs("ff_loginform_regexp"),"i");if(E.exec(n))return formcacheset(e,n,"is_login",!0),!0}return formcacheset(e,n,"is_login",!1),verbose_log("Password Form detection: "+n+L+" has too many password fields; do not treat as login form [PW:"+m+"/NON:"+g+"]"),null}}else if("email"==p.type||"text"==p.type||"textarea"==p.type||"tel"==p.type||"url"==p.type){if(!lpIsVisible(p)||g_use_wacky_disp&&!is_wacky_disp(e,p)){if(!h)continue;verbose_log("EVALUATING HIDDEN FORM, NOT IGNORING HIDDEN FIELD ANYMORE "+LP_pickFormName(e,p))}if(g++,g_aspx_hack&&g>5||!g_aspx_hack&&g>2)return formcacheset(e,n,"is_login",!1),verbose_log("Password Form detection: "+n+" has too many non-password fields; do not treat as login form [PW:"+m+"/NON:"+g+"]"),null}}}}return 1==m?(verbose_log("Password Form detection: "+n+" is a login form, has only one passwd field"),formcacheset(e,n,"is_login",!0),!0):g_aspx_hack&&isASPpage()&&do_bgiconinput&&m>1?(verbose_log("Password Form detection: "+n+" is an ASP form, treat as login form"),formcacheset(e,n,"is_login",!0),!0):(v||formcacheset(e,n,"is_login",!1),!1)}function is_google_signin_v2(e,t){var r=e.location.href;return(r.includes("https://accounts.google.com/signin/v2/identifier")||r.includes("https://accounts.google.com/ServiceLogin/identifier"))&&"email"==t[0].type}function looksLikePassword(e,t){return isInputFieldPassword(e,t)}function isInputFieldPassword(e,t){if(null==e||null==t||"INPUT"!=t.tagName||"hidden"==t.type)return!1;try{var r=gettldcached(e.location.href)}catch(e){return!1}if(!valid_by_role(e,t))return!1;var n=!1;if("text"==t.type&&is_watermark(t.className)&&is_watermark_password(t))try{t.type="password"}catch(e){n=!0}if("text"==t.type&&(0==t.name.indexOf("pass")||0==t.name.toLowerCase().indexOf(lpgs("Password").toLowerCase()))){return!(new RegExp(lpgs("ff_username_regexp"),"i").exec(t.name)&&t.form&&t.form.action&&t.form.action.indexOf("login")>=0)}return g_aspx_hack&&isASPpage()&&do_bgiconinput&&"text"==t.type&&t.value.toLowerCase().indexOf(lpgs("Password").toLowerCase())>=0&&(n=!0),!("password"!=t.type&&!n)&&(("facebook.com"!=r||"string"!=typeof t.id||!t.id.match(/^[a-z0-9]{6}_\d{1,2}_ci_password$/))&&(("tdbank.com"!=r||"string"!=typeof t.name||"user"!=t.name)&&("google.com"!=r||"string"!=typeof t.id||"Passwd-hidden"!=t.id)))}function checkDocumentForLoginOrphans(e){if(e||(e=LP_derive_doc()),!e)return!1;var t=formcacheget(e,"fakedoc","orphan");if(null!=t)return t;var r,n=[],a=[],i=[],o=0,l=0;if("undefined"!=typeof Math){for(var s=Math.floor(1e4*Math.random()),c=["input"],f=0;f<c.length;f++){var d=e.getElementsByTagName(c[f]),u=d.length;Checkpoint.assert(u<MAX_INPUTS_SOFT,"page has too many inputs"),u>MAX_INPUTS_SOFT&&(u=MAX_INPUTS_SOFT);for(var _=0;_<u;_++)if(checkIsDisplayed(e,d[_],0,null,s)){if(r=d[_],null!=r.id&&""!=r.id){var p=i[r.id];if(null!=p)continue;i[r.id]=!0}if(null!=r.name&&""!=r.name){var p=a[r.name];if(null!=p)continue;a[r.name]=!0}if(lp_in_array(LP_pickFieldName(e,r),n))verbose_log("fieldname "+n[p]+" is blacklisted, skipping");else{var m=fieldIsDoublePassword(e,r);if(null==r.form&&("password"==r.type||"text"==r.type&&m===DOUBLE_TEXT_VISIBLE||"text"==r.type&&m===DOUBLE_SECRET_TEXT_VISIBLE)){o++;var g,h,v=[],y=LP_pickFieldName(e,r),P=LP_getname(r);for(y&&v.push(y),P&&y!=P&&v.push(P),h=0;h<v.length;h++)if((g=v[h])&&g.toLowerCase().indexOf(lpgs("Password").toLowerCase())>=0&&_>0){var L=d[_-1],E=LP_pickFieldName(e,L),x=LP_getname(L),k=new RegExp(lpgs("ff_username_regexp"),"i");if(k.exec(E)||k.exec(x)){l++;break}}}if(o>=2&&l>=2)break}}}return o>=1||1==l?(formcacheset(e,"fakedoc","orphan",!0),!0):(formcacheset(e,"fakedoc","orphan",!1),!1)}}function chk_form_changepw(e,t){if(null==e||null==t)return!1;for(var r=lpCheckCurrentPWField(t),n=!1,a=null,i=null,o=1;o<=2;o++){n=!1,a=i=null;var l=-1;if(1==o){if(r)for(var s=0;s<t.elements.length;s++)if(t.elements[s]==r){l=s+1;break}}else l=0;if(-1!=l){for(var s=l;s<t.elements.length;s++){var c=t.elements[s];if("FIELDSET"!=c.tagName)if(isInputFieldPassword(e,c)){if(!n&&a&&i);else if(i=a,a=c,n&&a&&i)break;n=!0}else n=!1}if(a&&i)break}}return null!=a&&null!=i&&null!=r}function containsSubString(e,t){return e&&e.replace(/\s/g,"").toLowerCase().indexOf(t.toLowerCase())>-1}function textFieldScore(e,t){var r=0;return containsSubString(e.name,t)&&r++,containsSubString(e.id,t)&&r++,containsSubString(e.className,t)&&r++,r}function isInputFieldTotpCode(e,t){if(null==e||null==t||"INPUT"!=t.tagName||"hidden"==t.type)return!1;try{var r=gettldcached(e.location.href)}catch(e){return!1}if(!valid_by_role(e,t))return!1;if("text"!=t.type&&"tel"!=t.type&&"number"!=t.type)return!1;if(textFieldScore(t,"totp")>0)return!0;if("salesforce.com"==r&&"tc"==t.id&&6==t.maxLength&&"tc"==t.name&&-1!=t.form.action.indexOf("Totp"))return!0;if("github.com"==r&&"otp"==t.id&&"otp"==t.name&&-1!=t.form.action.indexOf("two-factor"))return!0;if("live.com"==r&&"idTxtBx_SAOTCC_OTC"==t.id&&"otc"==t.name&&8==t.maxLength)return!0;if("google.com"==r&&-1!=t.id.indexOf("PhonePin"))return!1;var n=0;return n+=textFieldScore(t,"code"),n+=textFieldScore(t,"pin"),n+=textFieldScore(t,"verification"),n+=textFieldScore(t,"2fa"),n+=textFieldScore(t,"twofactor"),n+=textFieldScore(t,"tfa"),t.pattern&&containsSubString(t.pattern,"0-9")&&n++,t.placeholder&&(containsSubString(t.placeholder,"6")||containsSubString(t.placeholder,"six")||containsSubString(t.placeholder,"hat"))&&n++,n>0}function form_get_password(e,t){if(e||(e=LP_derive_doc()),!e||!t)return null;var r=LP_pickFormName(e,t),n=formcacheget(e,r,"password_field");if(null!==n)return n;if(!0===formcacheget(e,r,"nopasswords"))return null;var a,i=null,o=[];if(o="FORM"==t.tagName.toUpperCase()?t.elements:t.getElementsByTagName("INPUT"),Checkpoint.assert(null!==o&&o.length>0,"empty form?"),"undefined"==typeof Math)return null;var l=o.length;Checkpoint.assert(l<MAX_FORM_ELEMENTS_HARD,"form "+r+" too big 3"),l>MAX_FORM_ELEMENTS_HARD&&(l=MAX_FORM_ELEMENTS_HARD);var s=0;for(a=0;a<l;a++)isInputFieldPassword(e,o[a])&&s++;for(var c=Math.floor(1e4*Math.random()),f=0;f<l;f++){var d=o[f];if("FIELDSET"!=d.tagName&&(checkIsDisplayed(e,d,0,null,c)&&isInputFieldPassword(e,d))){if(s>1&&(passwordIsFake(d)||LP_looksLikeOTPField(e,d)||!valid_by_role(e,d)||LP_fieldIsDisabled(d)||LP_treat_as_hidden(d)||is_search_field(e,d,!0)))continue;i=d;break}}return null===i&&0===s&&formcacheset(e,r,"nopasswords",!0),formcacheset(e,r,"password_field",i),i}function form_get_username(e,t){if(e||(e=LP_derive_doc()),!e||!t)return null;var r=[];r="FORM"==t.tagName.toUpperCase()?t.elements:t.getElementsByTagName("INPUT"),Checkpoint.assert(null!==r);var n=null,a=LP_pickFormName(e,t),i=formcacheget(e,a,"username_field");if(null!==i)return i;if("undefined"==typeof Math)return null;var o=r.length;Checkpoint.assert(o<MAX_FORM_ELEMENTS_HARD,"form "+a+" too big 4 "),o>MAX_FORM_ELEMENTS_HARD&&(o=MAX_FORM_ELEMENTS_HARD);for(var l=Math.floor(1e4*Math.random()),s=0;s<o;s++){var c=r[s];if("FIELDSET"!=c.tagName&&"hidden"!=c.type&&(valid_by_role(e,c)&&!LP_fieldIsDisabled(c)&&!is_search_field(e,c,!0)&&checkIsDisplayed(e,c,0,null,l)&&("text"==c.type||"email"==c.type||looksLikeUsername(c)))){if(isFirstFieldNonLoginSubForm(e,c))return null;n=c;break}}return formcacheset(e,a,"username_field",n),n}function doc_get_orphan_username(e){if(!e&&!(e=LP_derive_doc()))return null;var t;if("undefined"!=typeof Math){var r=formcacheget(e,"orphans","username_field");if("none"==r)return null;if(null!==r)return r;var n=get_javaservlet_fields(e,g_is_specialsite);if(n&&2==n.length&&n[0])return formcacheset(e,"orphans","username_field",n[0]),n[0];if(LP_has_youama(e)){var a=LP_get_youama_fields(e);if(a&&a.login_username)return formcacheset(e,"orphans","username_field",a.login_username),a.login_username}var i=doc_get_form_equivalents(e);if(i&&i.length>0)for(t=0;t<i.length;t++)if("FORM"!=i[t].tagName.toUpperCase()){var o=form_get_username(e,i[t]);if(o)return formcacheset(e,"orphans","username_field",o),o}return formcacheset(e,"orphans","username_field","none"),null}}function doc_get_orphan_password(e){if(null==e)return null;if("undefined"!=typeof Math){var t=formcacheget(e,"orphans","password_field");if("none"==t)return null;if(null!==t)return t;var r=get_javaservlet_fields(e,g_is_specialsite);if(r&&2==r.length&&r[1])return formcacheset(e,"orphans","password_field",r[1]),r[1];if(LP_has_youama(e)){var n=LP_get_youama_fields(e);if(n&&n.login_password)return formcacheset(e,"orphans","password_field",n.login_password),n.login_password}var a=doc_get_form_equivalents(e);if(a&&a.length>0)for(var i=0;i<a.length;i++)if("FORM"!=a[i].tagName.toUpperCase()){var o=form_get_password(e,a[i]);if(o)return formcacheset(e,"orphans","password_field",o),o}return formcacheset(e,"orphans","password_field","none"),null}}function set_active_username_password(e,t){if(null==e)return g_popup_active_username=null,void(g_popup_active_password=null);var r=null,n=null;null==t?checkDocumentForLoginOrphans(e)&&(r=doc_get_orphan_username(e),n=doc_get_orphan_password(e)):(r=form_get_username(e,t),n=form_get_password(e,t)),g_popup_active_username=r,g_popup_active_password=n}function looksLikeEmail(e,t){return null!=e&&null!=t&&("text"==t.type||"email"==t.type)&&("email"==t.type||!!new RegExp(lpgs("ff_email_regexp"),"i").exec(t.name))}function is_search_field(e,t,r){if(null==e||null==t||"INPUT"!=t.tagName.toUpperCase()&&!t.getAttribute("contentEditable"))return!1;var n=null;switch(t.type){case"search":n=!0;break;case"text":break;default:"INPUT"==t.tagName.toUpperCase()&&(n=!1)}if(null!==n)return n;null===r&&(r=!1);var a=LP_pickFieldName(e,t),i=fieldcacheget(e,a,"search");if(null!=i)return i;var o=t.form,l=[];if(null!=o&&(l=o.elements),t.parentNode&&"FORM"!=t.parentNode.tagName&&t.parentNode.className&&t.parentNode.className.toLowerCase().indexOf("login")>=0&&t.className&&t.className.toLowerCase().indexOf("search")>=0)return!1;if((null!=t.className&&t.className.toLowerCase().indexOf("search")>=0||t.className.toLowerCase().indexOf("srch")>=0||t.id.toLowerCase().indexOf("search")>=0||t.id.toLowerCase().indexOf("srch")>=0||t.name.toLowerCase().indexOf("search")>=0||t.name.toLowerCase().indexOf("srch")>=0)&&t.name.toLowerCase().indexOf("user")<0&&t.name.toLowerCase().indexOf("login")<0&&t.id.toLowerCase().indexOf("user")<0&&t.id.toLowerCase().indexOf("login")<0&&(r||l.length<5))return fieldcacheset(e,a,"search",!0),!0;var s=new RegExp(lpgs("ff_search_regexp"),"i");if(s.exec(t.name)||s.exec(t.id)){var c=t.name&&t.name.match(/[qQ]/)||t.id&&t.id.match(/[qQ]/),f=new RegExp(lpgs("ff_email_regexp"),"i"),d=new RegExp(lpgs("ff_username_regexp"),"i");if(c&&t.name&&!t.name.match(/^[qQ]/)&&(!t.id||t.id&&!t.id.match(/^[qQ]/)))pass;else if(c&&t.id&&!t.id.match(/^[qQ]/)&&(!t.name||t.name&&!t.name.match(/^[qQ]/)))pass;else{if(!c||!(d.exec(t.name)||d.exec(t.id)||f.exec(t.name)||f.exec(t.id)))return verbose_log("field "+a+" appears to be a search field based on regexp"),fieldcacheset(e,a,"search",!0),!0;pass}}var u=t.getAttribute("placeholder");if(null!=u&&u.toLowerCase().indexOf("search")>=0)return verbose_log("field "+a+" appears to be a search field based on placeholder text"),fieldcacheset(e,a,"search",!0),True;if("rds-instances-filter-txtbx"==t.id)return verbose_log("field "+a+" appears to be a search field based on manually added searchtext"),fieldcacheset(e,a,"search",!0),!0;if(t.parentNode&&"FORM"!=t.parentNode.tagName&&t.parentNode.className&&(t.parentNode.className.toLowerCase().indexOf("search")>=0||t.parentNode.className.toLowerCase().indexOf("srch")>=0))return fieldcacheset(e,a,"search",!0),!0;if("search"==t.getAttribute("role"))return fieldcacheset(e,a,"search",!0),!0;var _=t.getAttribute("spellcheck");return t.className&&t.className.indexOf("tt-input")>=0&&_&&"false"===_?(fieldcacheset(e,a,"search",!0),!0):(fieldcacheset(e,a,"search",!1),!1)}function is_date_field(e){if(!e)return!1;var t=e.name,r=new RegExp("(?:date)|(?:calendar)","i"),n=new RegExp("(?:validate)","i"),t=e.name,a=e.id,i=e.className;if(r.exec(t)||r.exec(a)||r.exec(i))return!(n.exec(t)||n.exec(a)||n.exec(i));var o=e.getAttribute("placeholder");return!(!o||(o=o.toLowerCase(),-1==o.indexOf("yyyy")&&-1==o.indexOf("/yy")&&-1==o.indexOf("mm/")))}function is_search_form(e,t){if(null==e||null==t||"FORM"!=t.tagName)return!1;var r=LP_pickFormName(e,t),n=formcacheget(e,r,"search");return null!=n?n:null!=t.id&&t.id.length>0&&void 0!==t.id.toLowerCase&&(t.id.toLowerCase().indexOf("search")>=0||t.id.toLowerCase().indexOf("srch")>=0)||null!=t.name&&t.name.length>0&&void 0!==t.name.toLowerCase&&(t.name.toLowerCase().indexOf("search")>=0||t.name.toLowerCase().indexOf("srch")>=0)?(verbose_log("form "+r+" appears to be a search form based on name/id "),formcacheset(e,r,"search",!0),!0):"search"==t.getAttribute("role")?(formcacheset(e,r,"search",!0),!0):(formcacheset(e,r,"search",!1),!1)}function looksLikeUsername(e,t){if(!e)return!1;var r=e.ownerDocument,n=LP_hasAngular(r);if(void 0!==t&&null!==t||(t=!1),!t&&"text"!=e.type&&"email"!=e.type&&"url"!=e.type)return!1;var a=new RegExp(lpgs("ff_username_regexp"),"i");if(a.exec(e.name))return!0;if(e.id&&a.exec(e.id))return!0;var i=e.getAttribute("placeholder");if(null!=i&&i.indexOf("Login")>=0)return!0;if(n){var o=LP_getAngularAttributes(e);if(o&&o["ng-model"]&&a.exec(o["ng-model"]))return!0}var l=new RegExp(lpgs("ff_loginform_regexp"),"i");if(e.form)for(var s=e.form.elements,c=0;c<s.length;c++)if("submit"==s[c].type&&(s[c].name&&a.exec(s[c].name)||l.exec(s[c].name)))return!0;if(a=new RegExp("^id$|.*-id|online.*id$|.*Id$|onlineId\\d?$","i"),a.exec(e.name))return!0;if(g_is_specialsite){if(a=new RegExp(lpgs("ff_bankacctnum_regexp"),"i"),a.exec(e.name))return!0;if(a=new RegExp(lpgs("ff_company_regexp"),"i"),a.exec(e.name))return!0;if(a=new RegExp(lpgs("ff_email_regexp"),"i"),a.exec(e.name))return!0}return!1}function formHasUsernameField(e){var t=e.form;if(t)for(var r=t.elements,n=0;n<r.length;n++){var a=r[n];if("text"==a.type||"email"==a.type)return!0}return!1}function fieldIsDoublePassword(e,t){"document"==e&&(e=document,t=LP_getElementByIdOrName(e,t));if(null==e&&!(e=document))return!1;if(null==t||"checkbox"==t.type||"button"==t.type||"submit"==t.type||"select-one"==t.type)return NOT_DOUBLE_PW;var r=null,n=null,a=null,i=null;if(void 0!==t.previousElementSibling?r=t.previousElementSibling:(r=t.previousSibling)&&null!=r.nodeType&&3==r.nodeType&&(r=r.previousSibling),void 0!==t.nextElementSibling?n=t.nextElementSibling:(n=t.nextSibling)&&null!=n.nodeType&&3==n.nodeType&&(n=n.nextSibling),r&&"INPUT"!=r.tagName&&(r=null),n&&"INPUT"!=n.tagName&&(n=null),r&&(void 0!==r.previousElementSibling?a=r.previousElementSibling:(a=r.previousSibling)&&null!=a.nodeType&&3==a.nodeType&&(a=a.previousSibling),a&&"INPUT"!=a.tagName&&(a=null)),n&&(void 0!==n.nextElementSibling?i=n.nextElementSibling:(i=n.nextSibling)&&null!=i.nodeType&&3==i.nodeType&&(i=i.nextSibling),i&&"INPUT"!=i.tagName&&(i=null)),"undefined"!=typeof Math){var o=Math.floor(1e4*Math.random());if("password"==t.type&&!checkIsDisplayed(e,t,-1,null,o)&&r&&"text"==r.type&&!checkIsDisplayed(e,r,-1,null,o)&&n&&"text"==n.type&&checkIsDisplayed(e,n,-1,null,o)&&i&&"text"==i.type&&checkIsDisplayed(e,i,-1,null,o)||"text"==t.type&&checkIsDisplayed(e,t,-1,null,o)&&r&&"text"==r.type&&checkIsDisplayed(e,r,-1,null,o)&&a&&"password"==a.type&&!checkIsDisplayed(e,a,-1,null,o))return verbose_log("field "+LP_pickFieldName(e,t)+" needs double secret password hack"),g_double_secret_password_hack=!0,DOUBLE_SECRET_TEXT_VISIBLE;if("password"==t.type&&checkIsDisplayed(e,t,-1,null,o)&&r&&"text"==r.type&&!checkIsDisplayed(e,r,-1,null,o)||"text"==t.type&&!checkIsDisplayed(e,t,-1,null,o)&&n&&"password"==n.type&&checkIsDisplayed(e,n,-1,null,o))return verbose_log("field "+LP_pickFieldName(e,t)+" needs double password hack"),g_double_password_hack=!0,DOUBLE_PW_VISIBLE;var l=null!=t&&lpIsVisible(t,!0),s=null!=r&&lpIsVisible(r,!0),c=null!=n&&lpIsVisible(n,!0),f=null!=t&&looksLikeUsername(t),d=null!=r&&looksLikeUsername(r),u=null!=n&&looksLikeUsername(n);return"password"==t.type&&!l&&r&&"text"==r.type&&s&&!d||"text"==t.type&&l&&!f&&n&&"password"==n.type&&!c||"password"==t.type&&!l&&n&&"text"==n.type&&c&&!u||"text"==t.type&&l&&!f&&r&&"password"==r.type&&!s?(verbose_log("field "+LP_pickFieldName(e,t)+" needs double password hack"),g_double_password_hack=!0,DOUBLE_TEXT_VISIBLE):"password"==t.type&&l&&r&&"text"==r.type&&!s&&!d||"text"==t.type&&!l&&n&&"password"==n.type&&c||"password"==t.type&&l&&n&&"text"==n.type&&!c&&!u||"text"==t.type&&!l&&r&&"password"==r.type&&s?(verbose_log("field "+LP_pickFieldName(e,t)+" needs double password hack"),g_double_password_hack=!0,DOUBLE_PW_VISIBLE):NOT_DOUBLE_PW}}function ContigPWHack(e,t,r){if(null===e&&(e=document),null===e)return!1;if(void 0===e.getElementsByTagName)return!1;var n=lpCountInputFields(t);if("undefined"!=typeof Math){var a=Math.floor(1e4*Math.random());if((3==n.passwordvisible||4==n.passwordvisible)&&!0===n.passwordsContiguous){var i,o=e.getElementsByTagName("input");for(i=0;i<o.length&&!(i>100);i++)if(o[i]==r){if(void 0!==o[i+1]&&"password"==o[i+1].type&&void 0!==o[i+2]&&"password"==o[i+2].type&&checkIsDisplayed(e,o[i],-1,null,a)&&checkIsDisplayed(e,o[i+1],-1,null,a)&&checkIsDisplayed(e,o[i+2],-1,null,a))return!0;break}}return!1}}function isContigPW(e,t,r){null==t&&(t=e);var n,a=t.getElementsByTagName("input");if("undefined"!=typeof Math){var i=Math.floor(1e4*Math.random());for(n=0;n<a.length;n++)if(a[n]==r&&"password"==a[n].type){if(void 0!==a[n+1]&&"password"==a[n+1].type&&checkIsDisplayed(e,a[n],-1,null,i)&&checkIsDisplayed(e,a[n+1],-1,null,i)||void 0!==a[n-1]&&"password"==a[n-1].type&&checkIsDisplayed(e,a[n],-1,null,i)&&checkIsDisplayed(e,a[n-1],-1,null,i))return!0;break}return!1}}function get_prev_field(e,t){void 0!==t.previousElementSibling?prev_field=t.previousElementSibling:(prev_field=t.previousSibling,prev_field&&null!=prev_field.nodeType&&prev_field.nodeType==TEXT_NODE&&(prev_field=prev_field.previousSibling))}function get_next_field(e,t){void 0!==t.nextElementSibling?next_field=t.nextElementSibling:(next_field=t.nextSibling,next_field&&null!=next_field.nodeType&&next_field.nodeType==TEXT_NODE&&(next_field=next_field.nextSibling))}function isFirstFieldNonLoginSubForm(e,t){if(null==e||null==t||"INPUT"!=t.tagName)return!1;if("password"==t.type||"hidden"==t.type)return!1;if("text"==t.type){var r=new RegExp(lpgs("ff_firstname_regexp"),"i");if(r.exec(t.name)||r.exec(t.id))return!0;if(r=new RegExp("register|signup|enroll|create","i"),t.parentNode&&r.exec(t.parentNode.name)||r.exec(t.parentNode.id))return!0;if(t.parentNode&&t.parentNode.parentNode&&(r.exec(t.parentNode.parentNode.name)||r.exec(t.parentNode.parentNode.id)))return!0}return!1}function isUsernameFieldLoginSubForm(e,t){return null!=e&&null!=t&&"INPUT"==t.tagName&&("password"!=t.type&&"hidden"!=t.type&&(FoundNonLoginSubForm(e)?False:!!looksLikeUsername(t)))}function FoundNonLoginSubForm(e){if(null==e)return!1;if(isASPpage()){var t,r=getAllIconStates();for(t=0;t<r.length;t++){if("formfills"==r[t].fillhint)return True}}return False}function isPasswordFieldLoginSubForm(e,t){if(null==e||null==t||"INPUT"!=t.tagName)return!1;if("hidden"==t.type)return!1;if(FoundNonLoginSubForm(e))return False;if("password"==t.type){var r,n=e.getElementsByTagName("INPUT");for(r=0;r<n.length&&r<MAX_INPUTS_HARD&&t!=n[r];r++);if(t==n[r]&&r>0){var a=LP_pickFieldName(e,t);if(a&&a.toLowerCase().indexOf(lpgs("Password")>=0)){var i=n[r-1],o=LP_pickFieldName(e,i);if(new RegExp(lpgs("ff_username_regexp"),"i").exec(o))return!0}}}return!1}function isASPpage(){var e=!1;if(g_isfirefox){var t;t=void 0!==LP.lpGetCurrentWindow().getBrowser?LP.lpGetCurrentWindow().getBrowser().contentDocument:LP.getBrowser().contentDocument,t?e=t.g_found_aspx:verbose_log(t.location.href)}else e=g_found_aspx;return e||(e=!1),e}function setASPpage(e){var t=!1;if(null==e&&(e=!0),g_isfirefox){var r;r=void 0!==LP.lpGetCurrentWindow().getBrowser?LP.lpGetCurrentWindow().getBrowser().contentDocument:LP.getBrowser().contentDocument,r?t=r.g_found_aspx=e:verbose_log(r.location.href)}else g_found_aspx=e,t=!0;return t||(t=!1),t}function checkDocumentForLoginOrphansFirstStage(e){if(!e)return!1;var t=formcacheget(e,"fakedoc","orphan-first");if(null!=t)return t;if("undefined"!=typeof Math){for(var r=[],n=[],a=0,i=!1,o=Math.floor(1e4*Math.random()),l=["input"],s=0;s<l.length;s++)for(var c=e.getElementsByTagName(l[s]),f=0;f<c.length;f++){var d=c[f];if(f>20)break;if(!c[f].form&&checkIsDisplayed(e,c[f],0,null,o)){if(verbose_log("checking "+LP_pickFieldName(e,d)),null!=d.id&&""!=d.id){var u=n[d.id];if(null!=u)continue;n[d.id]=!0}if(null!=d.name&&""!=d.name){var u=r[d.name];if(null!=u)continue;r[d.name]=!0}if(looksLikeUsername(d)&&a++,isInputFieldPassword(e,d)){i=!0;break}if(a>2)break}}return a>0&&a<=4&&0==i?(decision_log(e,"DE27"),formcacheset(e,"fakedoc","orphan-first",!0),!0):(formcacheset(e,"fakedoc","orphan-first",!1),!1)}}function LP_looksLikeOTPField(e,t){if(!e||!t||"INPUT"!=t.tagName)return!1;var r=/^(otp|token|tokencode|mfacode)[_\W]|[_\W](otp|token|tokencode|mfacode)$|^(otp|token|tokencode|totpPin|mfacode):?$|[_\W](otp|token|tokencode|mfacode)[_\W]|(validation|verification|challenge).*code:?$/i,n=get_doc_location_href(e),a=(gettldcached(n),LP_pickFieldName(e,t));if(r.exec(a))return!0;var i=t.getAttribute("aria-label");if(i&&i.indexOf("O-Key")>0)return!0;var o=lpGetTextBeforeFormField(t,!1).toLowerCase();return!!r.exec(o)||!!(n&&n.toLowerCase().indexOf("challenge")>0&&o&&o.match(/([_\W]code:?$|^code[_\W])/))}function LP_fieldIsDisabled(e){return!!e&&(!(void 0===e.disabled||!e.disabled)||"true"===e.getAttribute("aria-disabled"))}function LP_fieldIsReadOnly(e){return!!e&&(!(void 0===e.readOnly||!e.readOnly)||"true"===e.getAttribute("aria-readonly"))}function LP_fieldIsDecorative(e){return!!e&&"presentation"===e.getAttribute("role")}function checkDocumentForCPWOrphans(e){if(!e&&!(e=LP_derive_doc()))return null;var t=formcacheget(e,"fakedoc","cpw");if(null!=t)return t;var r=null,n=0,a=e.getElementsByTagName("INPUT");Checkpoint.assert(a.length<=MAX_INPUTS_HARD,"page has too many inputs");for(var i=0;i<a.length;i++){var o=a[i];if(i>MAX_INPUTS_HARD)break;if(null==o.form){if(isInputFieldPassword(e,o)&&lpIsVisible(o)){n++;var l=lpIsFieldCurrentPWField(o);if(l){if(r)return!1;r=l}}if(n>=4)return formcacheset(e,"fakedoc","cpw",!1),!1}}return n>=2&&r?(formcacheset(e,"fakedoc","cpw",!0),!0):(formcacheset(e,"fakedoc","cpw",!1),!1)}function ForceFillFieldClicked(e,t,r,n){var a=t;if(!a||!n)return!1;var i=a.form&&!r?LP_getname(a.form):"",o=a.type?a.type:"";return"password"==o?LP_getname(a)?LP_setval(e,LP_getname(a),n.p,0,n.a,i,o,n.sharedsite,null,n.automaticallyFill,n.reqinfo,null,!0,n.humanize,n.reqinfo,n.realurl):LP_fill_given_field(e,a,n.p,o,n.sharedsite,n.automaticallyFill,n.a,!0,!0,n.humanize,n.reqinfo,n.realurl):""==n.u||(LP_getname(a)?LP_setval(e,LP_getname(a),n.u,0,n.a,i,o,n.sharedsite,null,n.automaticallyFill,n.reqinfo,null,!0,n.humanize,n.reqinfo,n.realurl):LP_fill_given_field(e,a,n.u,o,n.sharedsite,n.automaticallyFill,n.a,!0,!0,n.humanize,n.reqinfo,n.realurl))}function ForceFillFormClicked(e,t,r,n){if(!t)return!1;var a=null,i=t.getElementsByTagName("INPUT");if(i){return a=GuessUserPassFields(i,!0,!0,!0),a&&(a.text&&ForceFillFieldClicked(e,a.text,!1,n),a.password&&ForceFillFieldClicked(e,a.password,!1,n)),!0}return!1}function GuessUserPassFields(e,t,r,n){if(!e||e.length<=0)return null;var a,i=document,o=e.length,l=null,s=null,c=!1;for(a=0;a<o;a++){var f=e[a];if(f)if(r&&(LP_fieldIsReadOnly(f)||LP_fieldIsDisabled(f)))decision_log(i,"DE24");else{if(!n||lpIsVisible(f,!0)){if(t){var d=new RegExp(lpgs("ff_search_regexp"),"i");if(d.exec(f.name)||d.exec(f.id)){var u=f.name&&f.name.match(/[qQ]/)||f.id&&f.id.match(/[qQ]/),_=new RegExp(lpgs("ff_username_regexp"),"i"),p=new RegExp(lpgs("ff_email_regexp"),"i");if(u&&f.name&&!f.name.match(/^[qQ]/)&&(!f.id||f.id&&!f.id.match(/^[qQ]/)))pass;else if(u&&f.id&&!f.id.match(/^[qQ]/)&&(!f.name||f.name&&!f.name.match(/^[qQ]/)))pass;else{if(!u||!(_.exec(f.name)||_.exec(f.id)||p.exec(f.name)||p.exec(f.id))){decision_log(i,"DE23");continue}pass}}}if(!popupfill_shoulddofield(i,f,!1)){if(("text"==f.type||"tel"==f.type||"email"==f.type)&&!s)if(t){var d=new RegExp(lpgs("ff_username_regexp"),"i");d.exec(f.name)||d.exec(f.id)?(l=f,c=!0):c||(l=f)}else l=f;if("password"==f.type&&!s)if(t){var d=new RegExp(lpgs("ff_username_regexp"),"i");c||!d.exec(f.name)&&!d.exec(f.id)?s=f:l=f}else s=f}}else decision_log(i,"DE25")}}var m={};return l&&(m.text=l),s&&(m.password=s),isEmptyObject(m)?null:m}function ForceFillClicked(e,t,r){var n=g_popupfill_parent;if(n||(n=g_popupfill_parent_last),!n){if(g_force_fill_active_element){var a=LP_getActiveElement(e);a&&"INPUT"==a.tagName&&LP_docHasFocus(e)&&hasIconState(e,LP_pickFieldName(e,a))&&(n=a,info_log("CV21"))}if(!n)return!1}if(!e&&!(e=n.ownerDocument))return!1;var i=chk_form_has_password(e,n.form),o=chk_form_ask_generate(e,n.form);return n.form&&i&&!o?!(!ForceFillFormClicked(e,n.form,t,r)||""===n.value)||ForceFillFieldClicked(e,n,t,r):null==n.form?ForceFillOrphanFieldClicked(e,n,r):ForceFillFieldClicked(e,n,t,r)}function isMultiStageLoginForm(e){}function LP_passwordAlt(e,t){return!(!e||!t||"INPUT"!=t.tagName)&&("nyckel"==LP_pickFieldName(e,t).toLowerCase()&&"password"==t.type)}function LP_explicit_ignored(e,t){if(!e||!t||void 0===t.getAttribute)return!0;var r=t.getAttribute("data-lpignore");return"true"===r||("true"===(r=!!t.dataset&&t.dataset.lpignore)||("true"===(r=t.getAttribute("lpignore"))||"true"===t.lpignore))}function countFormEquivalents(e){for(var t=0,r=e.getElementsByTagName("FORM"),n=LP_getFormsThreshold(e),a=0;a<r.length&&a<n;a++){lpIsVisible(r[a]),t++}return t}function LP_implicit_ignored(e,t){if(!t)return!1;if(!e&&!(e=LP_derive_doc()))return!1;var r=t.id,n=t.name,a=e.body,i=t.form;if(n&&"post_title"==n&&a&&a.className&&a.className.indexOf("wp-admin")>=0)return!0;if(n&&("symbols"==n||"symbol"==n))return!0;if("text"==t.type&&r&&(r.indexOf("_note")>0||r.indexOf("-note")>0))return!0;var o=new RegExp(lpgs("ff_combineddummy_regexp"),"i"),l=new RegExp("member.*number","i");return!o.exec(r)&&!o.exec(n)||l.exec(r)||l.exec(n)?!!LP_field_is_xsrf(e,t)||!(!i||popupfill_shoulddoform(e,i)):(decision_log(e,"DE22",{param1:r,param2:n}),!0)}function LP_read_website_hint(e,t){}function should_ignore_body_relative(e){if(e||(e=LP_derive_doc()),!e)return!1;var t=formcacheget(e,"fakedoc","ignore-relative-style");if(!0===t||!1===t)return t;var r=0,n=null,a=(LP_get_cached_body_rect(e),LP_get_body_reference(e)),i=LP_get_cached_body_style(e);if(i&&"relative"!=i.position)return formcacheset(e,"fakedoc","ignore-relative-style",!0),!0;var o=[];if(a&&(o=a.children),o&&o.length>0)for(Checkpoint.assert(o.length<100,"too many body.children"),r=0;r<o.length&&r<100;r++)if(!lp_in_array(o[r].tagName.toUpperCase(),["SCRIPT"])&&lp_in_array(o[r].tagName.toUpperCase(),["DIV","SECTION","FORM"])){if((n=LP_get_live_style(o[r]))&&"relative"==n.position)return formcacheset(e,"fakedoc","ignore-relative-style",!1),!1;break}return formcacheset(e,"fakedoc","ignore-relative-style",!0),!0}function LP_iconFieldWidthOK(e,t,r){var n=2,a=3;if(!e||null===t)return!1;var i=e.ownerDocument;if(!i)return verbose_log("iconFieldWidthOK: no doc???"),!1;if(void 0===r||null===r)if(isInputFieldPassword(i,e))r=!0;else{var o=e.form;if(o){var l=chk_form_has_password(i,o);l&&(r=!0)}}return r?!(t>0&&t<40)&&!!function(e){if(!e)return!1;var t=e.getAttribute("size"),r=e.getAttribute("maxlength");return null==t&&(t=e.size),null==r&&(r=e.maxLength),!(""==e.style.width&&t&&t<n&&t>=0)&&!(r&&r<a&&r>=0)}(e):!(t>0&&t<100)}function create_icons_on_ASP(e,t){if(do_experimental_popupfill){if(e||(e=LP_derive_doc()),!e)return!1;decision_log(e,"DE21",{param1:e.location.href});var r=[];if(g_do_icon_number_hint)if(g_isfirefox){var n=LP.getMatchingSites(e.location.href,SKIP_GENPWS),a=n&&n.length?n.length:0;r.sites=a}else r=g_icon_numbers;var i,o,l=e.getElementsByTagName("FORM"),s=SHOULD_DO_ALWAYS,c=LP_getFormsThreshold(e),f=0;for(o=0;o<l.length&&o<c;o++){var d=l[o].elements,u=(chk_form_has_password(e,l[o]),chk_form_is_nonlogin_form(e,l[o]),chk_form_ask_generate(e,l[o]),form_get_username(e,l[o])),_=form_get_password(e,l[o]),p=MAX_INPUTS_SOFT;for(LP_exceedInputsThreshold(e)||(p=MAX_INPUTS_HARD),i=0;i<d.length&&i<p;i++){var m=!1,g=d[i],h="sites";if("INPUT"==g.tagName){var v=!1;if(popupfill_shoulddofield(e,g,s)){var y=LP_fieldGetWidth(g),P=!0;if(t)(looksLikeUsername(g)||isInputFieldPassword(e,g))&&(h="sites",m=!0);else if(u==g)h="sites",m=!0;else if(isInputFieldPassword(e,g)){g==lpCheckCurrentPWField(l[o],!0)?(h="sites",m=!0,v=!0):_==g?(h="sites",m=!0,v=!0):isContigPW(e,g.form,g)?(h="generate",m=!0):(h="sites",m=!0,v=!0)}else isFirstFieldNonLoginSubForm(e,g)?(h="formfills",sendBG({cmd:"setformfillsactivetab"}),m=!0,P=!1):(isUsernameFieldLoginSubForm(e,g)||isPasswordFieldLoginSubForm(e,g))&&(h="sites",m=!0,v=!0);if(m){if(!LP_iconFieldWidthOK(g,y,P))continue;f++,setup_input_icon(e,g,h,r,v),g_clickable_input&&("password"==g.type&&formHasUsernameField(g)&&!g_clickable_input_on_password||!LP_didFieldClickEvent(e,g)&&h&&"sites"==h&&(LP_setFieldClickEvent(e,g),LP_addEventHandler(g,"click",function(t){var r=t.target,n=LPMAGIC+LP_getname_or_idx(e,r,LP_GETNAME_FAVOR_ID_OVER_NAME);if(null!=document.getElementById(n))g_clickable_input_on_password?is_your_popup_showing(e)||conditional_create_popup(e,r,FORCE_SHOW_NOHITS_NOLOGIN):(set_active_username_password(e,g.form),popuptoggle(e,null,LP_getname_or_idx(e,g,LP_GETNAME_FAVOR_ID_OVER_NAME),NO_FORCE_GENERATE,FORCE_SHOW_NOHITS));else if(g_input_click_intercept)try{info_log(e,"FF12"),icon_click_handler(t)}catch(e){}return!1},!1)))}}}}}decision_log(e,"DE1",{param1:f})}}function check_for_ASP(e,t){if(t){if(!isASPpage()&&g_aspx_hack){0!==t.name.indexOf("ctl00$")&&(null==t.form||"ctl00"!=t.form.name&&"landingform"!=t.form.name&&"landingForm"!=t.form.name&&"aspnetForm"!=t.form.name&&"aspnetForm"!=t.form.id)&&0!==t.name.indexOf("ctl00_")||isASPpage()||(setASPpage(!0),decision_log("DE20"));try{e.location&&e.location.href&&e.location.href.indexOf(".aspx")>0&&t.form&&t.form.elements&&t.form.elements.length&&t.form.elements.length>6&&(isASPpage()||(setASPpage(!0),decision_log("DE19")))}catch(t){write_error_to_history(e,"check_for_ASP",t)}}}}function create_icons_generic(e,t){if(do_experimental_popupfill){if(!e&&!(e=LP_derive_doc()))return null;decision_log(e,"DE16",{param1:e.location.href});var r=[];if(g_do_icon_number_hint)if(g_isfirefox){var n=LP.getMatchingSites(e.location.href,SKIP_GENPWS),a=n&&n.length?n.length:0;r.sites=a}else r=g_icon_numbers;var i,o=e.getElementsByTagName("INPUT"),l=o.length,s=MAX_INPUTS_SOFT;LP_exceedInputsThreshold(e)||(s=MAX_INPUTS_HARD),Checkpoint.assert(l<=s,"page has too many inputs"),l>s&&(l=s);var c=SHOULD_DO_ALWAYS,f=checkDocumentForLoginOrphans(e),d=(LP_firstVisibleOrphan(e),0);for(i=0;i<l;i++){var u=o[i].form,_=null,p=null;if(u){_=form_get_username(e,u),p=form_get_password(e,u)}else _=doc_get_orphan_username(e),p=doc_get_orphan_password(e);var m=o[i],g=!1,h="sites",v=!1;if(popupfill_shoulddofield(e,m,c)){var y=LP_fieldGetWidth(m),P=!0;if(t)(looksLikeUsername(m)||isInputFieldPassword(e,m))&&(h="sites",g=!0);else if(_==m)h="sites",g=!0;else if(isInputFieldPassword(e,m)){u&&m==lpCheckCurrentPWField(u,!0)?(h="sites",g=!0,v=!0):lpIsFieldCurrentPWField(m)?(h="sites",g=!0,v=!0):p==m?(h="sites",g=!0,v=!0):isContigPW(e,m.form,m)?(h="generate",g=!0):(h="sites",g=!0,v=!0)}else isFirstFieldNonLoginSubForm(e,m)?(h="formfills",sendBG({cmd:"setformfillsactivetab"}),g=!0,P=!1):isUsernameFieldLoginSubForm(e,m)||isPasswordFieldLoginSubForm(e,m)?(h="sites",g=!0,v=!0):null==m.form&&f&&(looksLikeUsername(m)||isInputFieldPassword(e,m))&&(h="sites",g=!0);if(g){if(!LP_iconFieldWidthOK(m,y,P))continue;d++;setup_input_icon(e,m,h,r,v);g_clickable_input&&("password"==m.type&&formHasUsernameField(m)&&!g_clickable_input_on_password||!LP_didFieldClickEvent(e,m)&&h&&"sites"==h&&(LP_setFieldClickEvent(e,m),LP_addEventHandler(m,"click",function(t){var r=t.target,n=LPMAGIC+LP_getname_or_idx(e,r,LP_GETNAME_FAVOR_ID_OVER_NAME);if(null!=document.getElementById(n))g_clickable_input_on_password?is_your_popup_showing(e)||conditional_create_popup(e,r,FORCE_SHOW_NOHITS_NOLOGIN):(set_active_username_password(e,m.form),popuptoggle(e,null,LP_getname_or_idx(e,m,LP_GETNAME_FAVOR_ID_OVER_NAME),NO_FORCE_GENERATE,FORCE_SHOW_NOHITS));else if(g_input_click_intercept)try{info_log(e,"FF12"),icon_click_handler(t)}catch(e){}return!1},!1)))}}}return decision_log(e,"DE2",{param1:d}),!0}}function LP_getAngularAttributes(e,t){if(e||(e=LP_derive_doc()),!t||!e)return null;for(var r={},n=["ng-model","ng-controller","ng-repeat","ng-include","ng-switch","ng-view","ng-minlength","ng-maxlength","ng-pattern","ng-click","ng-submit","ng-required"],a=0;a<n.length;a++){var i=t.getAttribute(n[a]);null!==i&&(r[n[a]]=i)}for(var o=["ng-valid","ng-invalid","ng-pristine","ng-dirty","ng-touched","ng-untouched","ng-pending","ng-empty","ng-not-empty"],a=0;a<o.length;a++){var l=sprintf("[\\w]*%s[\\w]*",o[a]);t.className.match(l)&&(r[o[a]]=!0)}return r}function LP_hasAngular(e){if(e||(e=LP_derive_doc()),!e)return!1;var t=!1,r=formcacheget(e,"fakedoc","has-angular");if(null!=r)return r;var n=e.documentElement,a=e.body;return a&&a.getAttribute("ng-app")||n&&n.getAttribute("ng-app")||a&&null!==a.getAttribute("ng-strict-di")||n&&null!==n.getAttribute("ng-strict-di")?t=!0:LP_getElementByXPath(e,"//*[@ng-app!='']")&&(t=!0),formcacheset(e,"fakedoc","has-angular",t),t}function LP_hasKnockout(e){if(e||(e=LP_derive_doc()),!e)return!1;var t=!1,r=formcacheget(e,"fakedoc","has-knockout");if(null!=r)return r;if(g_isie){for(var n=e.getElementsByTagName("input"),a=0;a<n.length&&a<MAX_INPUTS_HARD;a++)if(n[a].getAttribute("data-bind")){t=!0;break}}else{var i=LP_getElementsByXPath(e,"//*[@data-bind != '']");i&&i.length>0&&(t=!0)}return formcacheset(e,"fakedoc","has-knockout",t),t}function LP_has_yui(e){if(e||(e=LP_derive_doc()),!e)return!1;var t=formcacheget(e,"fakedoc","has-yui");return null!=t?t:e.documentElement&&e.documentElement.className.indexOf("yui3-js-enabled")>=0?(formcacheset(e,"fakedoc","has-yui",!0),!0):e.documentElement&&0==e.documentElement.id.indexOf("yui_3")?(formcacheset(e,"fakedoc","has-yui",!0),!0):e.getElementById("yui3-css-stamp")?(formcacheset(e,"fakedoc","has-yui",!0),!0):(formcacheset(e,"fakedoc","has-yui",!1),!1)}function LP_field_is_xsrf(e,t){if(e||(e=LP_derive_doc()),!e||!t)return!1;var r=!1;return t.tagName&&"INPUT"==t.tagName.toUpperCase()&&"string"==typeof t.name&&(t.name.toUpperCase().indexOf("CSRF")>=0||t.name.toUpperCase().indexOf("XSRF")>=0||t.id.toUpperCase().indexOf("CSRF")>=0||t.id.toUpperCase().indexOf("XSRF")>=0)&&(r=!0),r}function LP_get_youama_fields(e){if(e||(e=LP_derive_doc()),!e)return null;var t={},r=formcacheget(e,"orphans","youama-fields");if(null!=r)return r;var n=LP_getElementByXPath(e,"//div[contains(@class,'youama-login-window')]//input[@id='youama-email']"),a=LP_getElementByXPath(e,"//div[contains(@class,'youama-login-window')]//input[@id='youama-password']"),i=LP_getElementByXPath(e,"//div[contains(@class,'youama-login-window')]//button[contains(@class,'youama-ajaxlogin-button')]"),o=LP_getElementByXPath(e,"//div[contains(@class,'youama-login-window')]"),l=LP_getElementByXPath(e,"//div[contains(@class,'youama-register-window')]//input[@id='youama-email']"),s=LP_getElementByXPath(e,"//div[contains(@class,'youama-register-window')]//input[@id='youama-password']"),c=LP_getElementByIdOrName(e,"youama-firstname"),f=LP_getElementByIdOrName(e,"youama-lastname"),d=LP_getElementByIdOrName(e,"youama-passwordsecond"),u=LP_getElementByXPath(e,"//div[contains(@class,'youama-register-window')]//button[contains(@class,'youama-ajaxlogin-button')]"),_=LP_getElementByXPath(e,"//div[contains(@class,'youama-register-window')]"),t={login_username:n,login_password:a,login_button:i,login_form_container:o,regis_username:l,regis_password:s,regis_password_confirm:d,regis_firstname:c,regis_lastname:f,regis_button:u,regis_form_container:_},r=formcacheset(e,"orphans","youama-fields",t);return t}function LP_has_youama(e){if(e||(e=LP_derive_doc()),!e)return[];var t=formcacheget(e,"fakedoc","has-youama");return null!=t?t:e.getElementsByClassName("youama-login-window").length>0||e.getElementsByClassName("youama-register-window").length>0?(formcacheset(e,"fakedoc","has-youama",!0),!0):(formcacheset(e,"fakedoc","has-youama",!1),!1)}function LP_has_dijit(e){if(e||(e=LP_derive_doc()),!e||!e.documentElement)return[];var t=0,r=e.getElementsByClassName("dijitContentPane");if(r&&r.length>0)return!0;if(e.documentElement.className.match(/^dj_[a-z]+|\sdj_[a-z]+/))return!0;for(r=e.getElementsByTagName("SCRIPT"),t=0;t<r.length;t++)if("dojo/connect"==r[t].getAttribute("type")||"dojo/method"==r[t].getAttribute("type"))return!0;for(r=e.getElementsByTagName("FORM"),t=0;t<r.length;t++)if(r[t].getAttribute("data-dojo-attach-point"))return!0;return!1}function LP_parser_milestone(e){return void 0!==e&&(LP_milestone_flags|=e,!0)}function page_is_nemid(e){if(e||(e=LP_derive_doc()),!e)return!1;var t=lp_gettld_url(punycode.URLToASCII(get_doc_location_href(document))),r="",n="",a=!1,i=formcacheget(e,"fakedoc","is-nemid");if(null!=i)return i;try{if(!get_can_xref(e,"top"))throw"xref";r=window.name,n=window.top.name}catch(t){set_can_xref(e,"top",!1)}return"danid.dk"!=t&&"nemid.nu"!=t||!e.getElementById("appArea")&&"nemid_iframe"!=r&&"loginWindow"!=n||(a=!0),formcacheset(e,"fakedoc","is-nemid",a),a}function LP_element_is_honeypot(e,t){if(e||(e=LP_derive_doc()),!e||!t)return!1;var r,n=gettldcached(get_doc_location_href(e)),a=[],i=[],o=0,l=["lpcurrpasselt","lpcurruserelt"];if(lp_in_array(t.id,l))return!1;if(has_same_tld(n,"citi.com")){if(e.getElementById("loginForm")||e.getElementById("logon")||e.getElementById("password")||e.getElementById("PASSWORD")){for(i=e.getElementsByTagName("input"),o=i.length,r=0;r<MAX_INPUTS_SOFT&&r<o;r++)if(i[r]&&"password"==i[r].type){if(lp_in_array(i[r].id,l))continue;a.push(i[r])}if(5==a.length&&"a"==a[0].defaultValue&&"b"==a[1].defaultValue&&"c"==a[2].defaultValue&&"d"==a[3].defaultValue&&lp_in_array(t,[a[0],a[1],a[2],a[3]]))return!0}}else if(compare_equiv_domains(n,"ebay.com")){var s=e.getElementsByName("runId2");if(1===s.length&&("userid"==t.id||"userid"==t.name||"pass"==t.id||"pass"==t.name||"runId2"==t.name))return!0}return!(!compare_equiv_domains(n,"nordnet.no")||"fake_password"!=t.name)||(a=null,i=null,!1)}function LP_page_is_lazyloader(e,t){if(e||(e=LP_derive_doc()),!e)return!1;var r=!1,n=formcacheget(e,"fakedoc","is-lazyloader");if(null!=n)return n;if(LP_hasAngular(e)||LP_hasKnockout(e)||LP_has_emberjs(e))return formcacheset(e,"fakedoc","is-lazyloader",!0),!0;if(e.body){var a=e.body.getAttribute("onload");if("string"==typeof a&&a.toLowerCase().indexOf("lazyload")>=0)return!0}var i="",o=new RegExp("requirejs|lazyload|LAB\\.?js|LAB\\.min\\.js","i"),l=new RegExp("dojo");if(!o||!l)return!1;for(var s=e.getElementsByTagName("script"),c=0;c<s.length;c++)if(i=s[c].getAttribute("src")){var f=s[c].id;if(o.exec(i)||o.exec(f)){r=!0;break}if("module"==s[c].getAttribute("type")){r=!0;break}if(l.exec(i)&&"async: true"==s[c].getAttribute("data-dojo-config")){r=!0;break}if("microloader"==f){var d=s[c].getAttribute("data-app");if(d){r=!0;break}}var u=s[c].getAttribute("data-requirecontext"),_=s[c].getAttribute("data-requiremodule");if(u&&_){r=!0;break}}else{var p=s[c].innerHTML;if(p&&p.length<512&&p.indexOf("function SRSRetry")>0)return!0}if(!r)for(var m=e.getElementsByTagName("meta"),g="",c=0;c<m.length;c++)if("string"==typeof(g=m[c].name)&&g.match(/config\/environment$/)){r=!0;break}return formcacheset(e,"fakedoc","is-lazyloader",r),r}function LP_isSinglePageApp(e){if(e||(e=LP_derive_doc()),!e)return!1;var t=formcacheget(e,"fakedoc","SPA");return null!=t?t:LP_hasAngular(e)||LP_hasKnockout(e)||LP_has_emberjs(e)?(formcacheset(e,"fakedoc","SPA",!0),!0):g_probablySinglePageApp>0?(formcacheset(e,"fakedoc","SPA",!0),!0):!!LP_url_is_single_page_app(get_doc_location_href(e))&&(formcacheset(e,"fakedoc","SPA",!0),!0)}function LP_has_jquery(e){if(e||(e=LP_derive_doc()),!e)return!1;var t=!1,r=formcacheget(e,"fakedoc","has-jquery");if(null!=r)return r;for(var n="",a=new RegExp("jquery","i"),i=e.getElementsByTagName("script"),o=0;o<i.length;o++)if(n=i[o].getAttribute("src"),a.exec(n)){t=!0;break}return formcacheset(e,"fakedoc","has-jquery",t),t}function LP_init_url_history(e){if(e||(e=LP_derive_doc()),!e)return!1;if("undefined"==typeof LPUH||null===LPUH||null===LPUH.url_history){if(LPUH={},null===LPUH)return!1;LPUH.url_history=[]}return!0}function LP_get_last_url_history(e){if(e||(e=LP_derive_doc()),!e)return!1;if(LP_init_url_history(e),LPUH){var t=LPUH.url_history.length;if(t>0)return LPUH.url_history[t-1]}return{}}function LP_reset_url_history(e){return LP_init_url_history(e),!!LPUH&&(LPUH.url_history=[],!0)}function LP_put_last_url_history(e){if(e||(e=LP_derive_doc()),!e)return!1;LP_init_url_history(e);var t=get_doc_location_href(e),r=crc32(LP_gettime()+"%"+t);return LPUH.url_history.push({href:t,href_hash:r}),verbose_log("computed new hash "+r+" for "+t),!0}function LP_has_extjs(e){}function LP_is_buttonlike(e,t){return e||(e=LP_derive_doc()),!(!e||!t)&&("BUTTON"==t.tagName||"INPUT"==t.tagName&&("submit"==t.type||"image"==t.type||"button"==t.type))}function LP_putBeeper(e,t,r){if(e||(e=LP_derive_doc()),!e)return!1;if(e.getElementById(BEEPID))return!0;if(!r&&!e.body)return!1;var n=e.createElement("div");return n.setAttribute("aria-hidden","true"),n.style.display="none",n.style.left="-1000px",n.style.height="0",n.setAttribute("data-lpbeep",t),n.id=BEEPID,r?r.appendChild(n):e.body.appendChild(n),!0}function LP_pickBeeper(e){if(e||(e=LP_derive_doc()),!e)return!1;var t=e.getElementById(BEEPID);return t&&t.parentNode.removeChild(t),!0}function LP_readBeeper(e){if(e||(e=LP_derive_doc()),!e)return null;var t=e.getElementById(BEEPID);if(t){var r=getComputedStyle(t);return{display:r.display,visibility:r.visibility,val:t.getAttribute("data-lpbeep")}}return null}function should_fill_on_click(e,t){if(e||(e=LP_derive_doc()),!e||!t)return!1;var r=!1,n=t.tagName.toUpperCase(),a=t.form,i=!1,o=t.getAttribute("role");if(LP_is_buttonlike(e,t)&&a){var l=a.action,s=a.method;l&&0==l.toLowerCase().indexOf("https://")&&s&&"POST"==s.toUpperCase()&&(r=!0,i=!0)}return i||("A"==n||"NAV"==n||"navigation"==o||"INPUT"==n&&"submit"==t.type)&&(r=!1,i=!0),i||lp_in_array(n,["INPUT","LABEL","SELECT","FIELDSET","OPTION","TEXTAREA","TBODY","THEAD","ADDRESS","BLOCKQUOTE","Q","PRE","ABBR","CITE","BODY","HEAD","META","SCRIPT","STYLE","MAIN","ARTICLE","HEADER","FOOTER","ASIDE","DETAILS","FIGURE","FIGCAPTION","MARK","SECTION","SUMMARY","TIME","IFRAME","FRAME","FRAMESET"])&&(r=!0,i=!0),!r}function should_simulate_submit_on_click(e,t){return e||(e=LP_derive_doc()),!1}function LP_url_is_single_page_app(e){return!(!e||"string"!=typeof e)&&!!new RegExp("https?://.*#\\/[a-z]","i").exec(e)}function LP_has_bootstrapJS(e){if(e||(e=LP_derive_doc()),!e)return!1;var t=!1,r=formcacheget(e,"fakedoc","has-bootstrap");if(null!=r)return r;for(var n="",a=new RegExp("bootstrap.min.js$","i"),i=e.getElementsByTagName("script"),o=0;o<i.length;o++)if(n=i[o].getAttribute("src"),a.exec(n)){t=!0;break}return formcacheset(e,"fakedoc","has-bootstrap",t),t}function LP_has_joomla(e){if(e||(e=LP_derive_doc()),!e)return!1;var t=!1,r=formcacheget(e,"fakedoc","has-joomla");if(null!=r)return r;for(var n="",a=new RegExp("(/media/jui/js|/templates/joomla)","i"),i=e.getElementsByTagName("script"),o=0;o<i.length;o++)if(n=i[o].getAttribute("src"),a.exec(n)){t=!0;break}return formcacheset(e,"fakedoc","has-joomla",t),t}function LP_has_emberjs(e){if(e||(e=LP_derive_doc()),!e)return!1;var t=!1,r=formcacheget(e,"fakedoc","has-emberjs");if(null!=r)return r;var n=e.body;if(n&&(n.className.indexOf("ember-application")>=0||"1"==n.getAttribute("data-ember-extension"))&&(t=!0),!t&&e.documentElement&&"1"==e.documentElement.getAttribute("data-ember-extension")&&(t=!0),!t)for(var a=e.getElementsByTagName("meta"),i="",o=0;o<a.length;o++)if("string"==typeof(i=a[o].name)&&i.match(/config\/environment$/)){t=!0;break}return formcacheset(e,"fakedoc","has-emberjs",t),t}var SHOULD_DO_LOGIN_ONLY=!0,SHOULD_DO_ALWAYS=!1,g_totp_elt=null,g_totp_form=null,DOUBLE_TEXT_VISIBLE=1,DOUBLE_PW_VISIBLE=2,DOUBLE_SECRET_TEXT_VISIBLE=3,DOUBLE_SECRET_PW_VISIBLE=4,NOT_DOUBLE_PW=0,LP_milestone_flags=0,g_probablySinglePageApp=0,BEEPID="_lpbeep",SPA_INDETERMINATE=0,SPA_LOADED=1,SPA_LOGIN=2,SPA_LOGINFAILED=4,SPA_ACCTMGMT=8,SPA_REGISTER=16,SPA_APP=32,SPA_INDETERMINATE_STATE="A",SPA_LOGIN_STATE="B",SPA_IN_APP_STATE="C",SPA_LOGIN_WITHIN_APP_STATE="D";