function drawSliderByVal(e){var n=e.getElementsByTagName("img")[0],t=(e.val-e.min)/(e.max-e.min),i=(e.scrollWidth-30)*t;n.style.left=i+"px"}function setSliderByClientX(e,n){var t=(n-e.offsetLeft-15)/(e.scrollWidth-30);e.val=(e.max-e.min)*t+e.min,e.val>e.max&&(e.val=e.max),e.val<e.min&&(e.val=e.min),drawSliderByVal(e),e.onchange(e.val,e.num)}function sliderClick(e){var n=sliderFromEvent(e);n&&setSliderByClientX(n,e.clientX)}function sliderMouseMove(e){var n=sliderFromEvent(e);n&&(activeSlider<0||(setSliderByClientX(n,e.clientX),stopEvent(e)))}function sliderFromEvent(e){if(!e&&window.event&&(e=window.event),!e)return!1;var n;return e.target&&(n=e.target),e.srcElement&&(n=e.srcElement),n.id&&n.id.match(/slider\d+/)||(n=n.parentNode),!!n&&(!(!n.id||!n.id.match(/slider\d+/))&&n)}function attachSliderEvents(){for(var e,n=document.getElementsByTagName("div"),t=0;t<n.length;t++)(e=n[t].id.match(/\bslider(\d+)\b/))&&(e=parseInt(e[1]),n[t].min=slider[e].min,n[t].max=slider[e].max,n[t].val=slider[e].val,n[t].onchange=slider[e].onchange,n[t].num=e,drawSliderByVal(n[t]),n[t].onchange(n[t].val,e),addAnEvent(n[t],"mousedown",function(e){g_slider_changed_length=!0,sliderClick(e);var n=sliderFromEvent(e);n&&(activeSlider=n.num,stopEvent(e))}),addAnEvent(n[t],"mouseup",function(e){activeSlider=-1,stopEvent(e)}))}function stopEvent(e){e.preventDefault?(e.preventDefault(),e.stopPropagation()):(e.returnValue=!1,e.cancelBubble=!0)}function addAnEvent(e,n,t){e.attachEvent?e.attachEvent("on"+n,t):e.addEventListener?e.addEventListener(n,t,!0):e["on"+n]=t}var activeSlider=-1;