var __extends=this&&this.__extends||function(t,o){function n(){this.constructor=t}for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e]);t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)},LastPass;!function(t){!function(t){!function(t){"use strict";!function(t){t[t.chrome=0]="chrome",t[t.firefox=1]="firefox",t[t.safari=2]="safari",t[t.ios=3]="ios",t[t.android=4]="android",t[t.mock=5]="mock"}(t.Environments||(t.Environments={}));t.Environments}(t.Automation||(t.Automation={}))}(t.Web||(t.Web={}))}(LastPass||(LastPass={}));var LastPass;!function(t){!function(t){!function(t){"use strict"}(t.Automation||(t.Automation={}))}(t.Web||(t.Web={}))}(LastPass||(LastPass={}));var LastPass;!function(t){!function(t){!function(t){!function(t){"use strict"}(t.Android||(t.Android={}))}(t.Automation||(t.Automation={}))}(t.Web||(t.Web={}))}(LastPass||(LastPass={}));var LastPass;!function(t){!function(t){!function(t){!function(o){"use strict";var n=function(){function o(t){this.proxy=t}return o.prototype.reportDone=function(){this.proxy.reportDone()},o.prototype.userInformationNeeded=function(){this.proxy.userInformationNeeded()},o.prototype.reportError=function(t){var o;o="string"==typeof t?t:JSON.stringify({name:t.name,message:t.message}),this.proxy.reportError(o)},o.prototype.reportLog=function(t){this.proxy.reportLog(JSON.stringify(t))},o.prototype.isMobile=function(){return!0},o.prototype.getEnvironment=function(){return t.Environments.android},o}();o.AndroidHostEnvironment=n}(t.Android||(t.Android={}))}(t.Automation||(t.Automation={}))}(t.Web||(t.Web={}))}(LastPass||(LastPass={}));var LastPass;!function(t){!function(t){!function(t){!function(t){"use strict";!function(t){t[t.Pending=0]="Pending",t[t.Resolved=1]="Resolved",t[t.Failed=2]="Failed"}(t.PromiseState||(t.PromiseState={}));var o=t.PromiseState,n=function(){function t(t){this.hostEnvironment=t,this.state=o.Pending,this.data=null,this.error=null,this.okCallbacks=[],this.errorCallbacks=[]}return t.prototype.then=function(t,n){if(void 0===n&&(n=null),this.state===o.Resolved)try{t(this.data)}catch(t){this.hostEnvironment.reportError(t)}else this.state===o.Failed?n(this.error):(this.okCallbacks.push(t),n&&this.errorCallbacks.push(n))},t}();t.Promise=n;var e=function(){function t(t){this.hostEnvironment=t,this.promise=new n(this.hostEnvironment)}return t.prototype.resolve=function(t){var n=this;this.promise.state=o.Resolved,this.promise.data=t,this.promise.okCallbacks.forEach(function(o){try{o(t)}catch(t){n.hostEnvironment.reportError(t)}})},t.prototype.reject=function(t){this.promise.state=o.Failed,this.promise.error=t,this.hostEnvironment.reportError(t),this.promise.errorCallbacks.forEach(function(o){o(t)})},t}();t.Deferred=e}(t.Promise||(t.Promise={}))}(t.Automation||(t.Automation={}))}(t.Web||(t.Web={}))}(LastPass||(LastPass={}));var LastPass;!function(t){!function(t){!function(t){"use strict";var o=function(){function t(){}return t.submitForm=function(t){t.submit()},Object.defineProperty(t.prototype,"location",{get:function(){return window.location.href},enumerable:!0,configurable:!0}),t.prototype.findElement=function(t){var o=new Array;t instanceof Array?o=t:"string"==typeof t&&o.push(t);for(var n=0;n<o.length;n++){var e=document.querySelector(o[n]);if(e)return e}return null},t.prototype.findAllElements=function(t){var o=new Array;t instanceof Array?o=t:"string"==typeof t&&o.push(t);for(var n=0;n<o.length;n++){var e=document.querySelectorAll(o[n]);if(e)return e}return null},t.prototype.elementExists=function(t){return null!==this.findElement(t)},t.prototype.clickButton=function(t){this.triggerEvents(["mousedown","mouseup"],t),t.click()},t.prototype.mouseClickButton=function(t){this.triggerEvents(["mousedown","mouseup"],t)},t.prototype.checkCheckBox=function(t){t.checked=!0},t.prototype.checkRadioButton=function(t){t.checked=!0},t.prototype.setValue=function(t,o){this.triggerEvents(["focus","keydown","keydown"],t),t.value=o,this.triggerEvents(["keyup","keyup","input","blur","change"],t)},t.prototype.triggerEvents=function(t,o){for(var n=0,e=t.length;n<e;n++){var r=document.createEvent("HTMLEvents");r.initEvent(t[n],!0,!0),o.dispatchEvent(r)}},t}();t.Document=o}(t.Automation||(t.Automation={}))}(t.Web||(t.Web={}))}(LastPass||(LastPass={}));var LastPass;!function(t){!function(t){!function(t){"use strict";var o=function(){function o(t,o){this.document=t,this.hostEnvironment=o}return o.prototype.clearTimeout=function(){clearInterval(this.intervalHandle)},o.prototype.waitForNavigation=function(o){var n=this;void 0===o&&(o=1e4),clearInterval(this.intervalHandle),this.intervalHandle=setInterval(function(){clearInterval(n.intervalHandle),n.hostEnvironment.reportError(new t.NavigationTimeoutError)},o)},o.prototype.waitForSelector=function(o,n){var e=this;void 0===n&&(n=1e4);var r=new t.Promise.Deferred(this.hostEnvironment),i=0;return clearInterval(this.intervalHandle),this.intervalHandle=window.setInterval(function(){if(e.document.elementExists(o)&&(window.clearInterval(e.intervalHandle),r.resolve(e.document.findElement(o))),i>=n){window.clearInterval(e.intervalHandle);var s=new t.SelectorNotFoundError(o);throw r.reject(s),s}i+=500},500),r.promise},o.prototype.waitForSelectorToDisappear=function(o,n){var e=this;void 0===n&&(n=1e4);var r=new t.Promise.Deferred(this.hostEnvironment),i=0;return clearInterval(this.intervalHandle),this.intervalHandle=window.setInterval(function(){if(e.document.elementExists(o)||(window.clearInterval(e.intervalHandle),r.resolve()),i>=n){window.clearInterval(e.intervalHandle);var s=new t.SelectorFoundError(o);throw r.reject(s),s}i+=500},500),r.promise},o.prototype.clickButton=function(o){var n=this.document.findElement(o);if(null===n)throw new t.SelectorNotFoundError(o);this.document.clickButton(n)},o.prototype.mouseClickButton=function(o){var n=this.document.findElement(o);if(null===n)throw new t.SelectorNotFoundError(o);this.document.mouseClickButton(n)},o.prototype.checkRadioButton=function(o){var n=this.document.findElement(o);if(null===n)throw new t.SelectorNotFoundError(o);this.document.clickButton(n)},o.prototype.setValue=function(o,n){var e=this.document.findElement(o);if(null===e)throw new t.SelectorNotFoundError(o);this.document.setValue(e,n)},o}();t.Helpers=o}(t.Automation||(t.Automation={}))}(t.Web||(t.Web={}))}(LastPass||(LastPass={}));var LastPass;!function(t){!function(t){!function(t){"use strict"}(t.Automation||(t.Automation={}))}(t.Web||(t.Web={}))}(LastPass||(LastPass={}));var LastPass;!function(t){!function(t){!function(t){"use strict";var o=function(t){function o(o){t.call(this,"Selector not found: "+o),this.name="Selector not found Error",this.message="Selector not found: "+o,this.stack=(new Error).stack}return __extends(o,t),o}(Error);t.SelectorNotFoundError=o}(t.Automation||(t.Automation={}))}(t.Web||(t.Web={}))}(LastPass||(LastPass={}));var LastPass;!function(t){!function(t){!function(t){"use strict";var o=function(){function o(){}return o.prototype.reportDone=function(){console.log("Done!")},o.prototype.userInformationNeeded=function(){console.log("User information needed!")},o.prototype.reportError=function(t){console.log("Error: "+t.message)},o.prototype.reportLog=function(t){console.log("Log: "+t)},o.prototype.isMobile=function(){return!1},o.prototype.getEnvironment=function(){return t.Environments.mock},o}();t.MockHostEnvironment=o}(t.Automation||(t.Automation={}))}(t.Web||(t.Web={}))}(LastPass||(LastPass={}));var LastPass;!function(t){!function(t){!function(t){"use strict";var o=function(t){function o(o){t.call(this,"Selector still found: "+o),this.name="Selector found Error",this.message="Selector found: "+o,this.stack=(new Error).stack}return __extends(o,t),o}(Error);t.SelectorFoundError=o}(t.Automation||(t.Automation={}))}(t.Web||(t.Web={}))}(LastPass||(LastPass={}));var LastPass;!function(t){!function(t){!function(t){"use strict";var o=function(){function t(t){this.host=t}return t.prototype.reportDone=function(){this.clearTimeoutFunction(),this.host.reportDone()},t.prototype.userInformationNeeded=function(){this.clearTimeoutFunction(),this.host.userInformationNeeded()},t.prototype.reportError=function(t){this.clearTimeoutFunction(),this.host.reportError(t)},t.prototype.reportLog=function(t){this.host.reportLog(t)},t.prototype.setClearTimeoutFunction=function(t){this.clearTimeoutFunction=t},t.prototype.isMobile=function(){return this.host.isMobile()},t.prototype.getEnvironment=function(){return this.host.getEnvironment()},t}(),n=function(){function n(n){var e=this;this.document=new t.Document,this.helpers=null,this.host=null;var r=new o(n);this.host=r,this.helpers=new t.Helpers(this.document,this.host),r.setClearTimeoutFunction(function(){return e.helpers.clearTimeout()})}return n.prototype.run=function(t){try{this.helpers.waitForNavigation(),t()}catch(t){this.host.reportError(t)}},n}();t.Context=n}(t.Automation||(t.Automation={}))}(t.Web||(t.Web={}))}(LastPass||(LastPass={}));var LastPass;!function(t){!function(t){!function(t){!function(o){"use strict";var n=function(){function o(){}return o.prototype.reportDone=function(){window.location.href=o.redirectBase+"done"},o.prototype.userInformationNeeded=function(){window.location.href=o.redirectBase+"user"},o.prototype.reportError=function(t){window.location.href=o.redirectBase+"error/error?name="+t.name+"&message="+t.message},o.prototype.reportLog=function(t){window.location.href=o.redirectBase+"log/log?data="+JSON.stringify(t)},o.prototype.isMobile=function(){return!0},o.prototype.getEnvironment=function(){return t.Environments.ios},o.redirectBase="lpomscallback://",o}();o.IOSHostEnvironment=n}(t.IOS||(t.IOS={}))}(t.Automation||(t.Automation={}))}(t.Web||(t.Web={}))}(LastPass||(LastPass={}));var LastPass;!function(t){!function(t){!function(t){"use strict";var o=function(t){function o(){t.call(this,"Navigation timed out."),this.name="Navigation time out Error",this.message="Navigation timed out.",this.stack=(new Error).stack}return __extends(o,t),o}(Error);t.NavigationTimeoutError=o}(t.Automation||(t.Automation={}))}(t.Web||(t.Web={}))}(LastPass||(LastPass={}));