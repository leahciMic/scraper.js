var FormFillDialog=function(t){VaultItemDialog.call(this,t,{additionalHeaderClasses:["icon"],closeButtonEnabled:!0,maximizeButtonEnabled:!0,buttonAlign:this.RIGHT_ALIGN})};FormFillDialog.prototype=Object.create(VaultItemDialog.prototype),FormFillDialog.prototype.constructor=FormFillDialog,function(t){var e=function(t){DialogInput.Input.call(this,void 0),this.customFieldElements=[],this.container=t};e.prototype=Object.create(DialogInput.Input.prototype),e.prototype.constructor=e,e.prototype.clear=function(){DialogInput.ErrorDisplayInput.prototype.clear.apply(this,arguments);for(var t=0,e=this.customFieldElements.length;t<e;++t){var i=this.customFieldElements[t];i.text.value="",i.value.value=""}},e.prototype.getValue=function(){for(var t=[],e=0,i=this.customFieldElements.length;e<i;++e){var o=this.customFieldElements[e],r={cfid:void 0===o.cfid?"0":o.cfid,text:o.text.value,value:o.value.value};("0"!==r.cfid||r.text||r.value)&&t.push(r)}return t},e.prototype.setValue=function(t){LPTools.removeDOMChildren(this.container),this.customFieldElements=[];for(var e=0,i=t.length;e<i||e<3;++e){var o=this.addElement();if(e<i){var r=t[e];o.text.value=r.text,o.value.value=r.value,o.cfid=r.cfid}}};var i=function(t,e){var i=LPTools.createElement("td");i.appendChild(e),t.appendChild(i)};e.prototype.addElement=function(){var t=LPTools.createElement("tr","settingsRow"),e=LPTools.createElement("textarea","dialogInput");i(t,e);var o=LPTools.createElement("textarea","dialogInput");i(t,o),this.container.appendChild(t);var r={text:e,value:o};return this.customFieldElements.push(r),r},e.prototype.validate=function(){return!0},FormFillDialog.prototype.validate=function(t){var e=VaultItemDialog.prototype.validate.apply(this,arguments);return""===t.decprofilename&&(this.addError("decprofilename","Name is required."),e=!1),t.creditmon&&(""===t.firstname&&(this.addError("firstname","First Name is required when Enable Free Credit Monitoring is checked."),e=!1),""===t.lastname&&(this.addError("lastname","Last Name is required when Enable Free Credit Monitoring is checked."),e=!1),""===t.birthday&&(this.addError("birthday","Birthday is required when Enable Free Credit Monitoring is checked."),e=!1),""===t.ssn&&(this.addError("ssn","Social Security Number is required when Enable Free Credit Monitoring is checked."),e=!1),""===t.city&&(this.addError("city","City / Town is required when Enable Free Credit Monitoring is checked."),e=!1),""===t.state&&(this.addError("state","State is required when Enable Free Credit Monitoring is checked."),e=!1),""===t.zip&&(this.addError("zip","ZIP / Postal Code is required when Enable Free Credit Monitoring is checked."),e=!1),t.phone.length<4&&(this.addError("phone","Phone Number is required when Enable Free Credit Monitoring is checked."),e=!1),"US"!==t.country&&(this.addError("country","Credit monitoring is only available for addresses in the United States."),e=!1)),e},FormFillDialog.prototype.open=function(t){t=t||{},t.title=t.title||(void 0===t.vaultItem?"Add Form Fill":"Edit Form Fill"),t.sourceFunction=LPProxy.getFormFillModel,VaultItemDialog.prototype.open.call(this,t)},FormFillDialog.prototype.getData=function(t){var e=VaultItemDialog.prototype.getData.apply(this,arguments);void 0!==this.inputFields.state.options[e.state]?e.state_name=this.inputFields.state.options[e.state].label:e.state_name=e.state;for(var i=this.inputFields.country.getElement().prop("options"),o=0;o<i.length;o++)if(i[o].value===e.country){e.country_name=i[o].text,e.country_cc3l=CC3L[e.country];break}return e},FormFillDialog.prototype.defaultFields=function(t){t.defaultData=$.extend({profilelanguage:"en-US",profiletype:FormFill.prototype.FORM_FILL_TYPE_GENERIC},t.defaultData),VaultItemDialog.prototype.defaultFields.call(this,t)},FormFillDialog.prototype.initialize=function(t){VaultItemDialog.prototype.initialize.apply(this,arguments),function(t){t.inputFields.profiletype.onChange(function(e){e===FormFill.prototype.FORM_FILL_TYPE_CREDIT_CARD?t.$element.addClass("creditCard"):t.$element.removeClass("creditCard"),t.selectFirstLeftMenuItem()})}(this),this.inputFields.custom_fields=new e(document.getElementById("custom_fields")),function(t){$("#addCustomFieldButton").bind("click",function(){t.inputFields.custom_fields.addElement().text.focus()})}(this)},FormFillDialog.prototype.setup=function(t,e){e.vaultItem?this.inputFields.profiletype.disable():this.inputFields.profiletype.enable(),VaultItemDialog.prototype.setup.apply(this,arguments)},FormFillDialog.prototype.add=function(t){(new FormFill).addFromDialog(t,null,this.data.saveOptions)}}(document);