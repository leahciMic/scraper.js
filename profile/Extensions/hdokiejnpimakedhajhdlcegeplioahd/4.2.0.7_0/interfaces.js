Interfaces=function(){var t=function(t,n){this.type=t,this.options=n,this.options&&(this.options.include&&(this.options.include=[].concat(this.options.include)),this.options.exclude&&(this.options.exclude=[].concat(this.options.exclude)))};t.prototype.requiredBy=function(t){var n;if(t&&this.options){if(this.options.include){for(n=0;n<this.options.include.length;++n)if(this.options.include[n]===t)return!0;return!1}if(this.options.exclude){for(n=0;n<this.options.exclude.length;++n)if(this.options.exclude[n]===t)return!1;return!0}}return!0},t.prototype.isSyncronized=function(){return this.options&&!0===this.options.sync},t.prototype.isSyncronousFunction=function(){return this.type===Interfaces.TYPE_SYNC_FUNCTION},t.prototype.isFunction=function(){return this.type===Interfaces.TYPE_FUNCTION||this.type===Interfaces.TYPE_SYNC_FUNCTION},t.prototype.isConstructor=function(){return this.type===Interfaces.TYPE_CONSTRUCTOR},t.prototype.isPrimitive=function(){return!this.isFunction()&&!this.isConstructor()},t.prototype.shouldSendIndirect=function(){return this.isPrimitive()?!this.options||void 0===this.options.sendIndirect||this.options.sendIndirect:this.options&&!0===this.options.sendIndirect},t.prototype.allowWrite=function(){return this.options&&!0===this.options.write},t.prototype.addIncludes=function(t){this.options=this.options||{},this.options.include=this.options.include.concat(t)};var n=function(t,n){for(var o in n){var i=n[o];switch(typeof i){case"object":t.hasOwnProperty(o)?Interfaces.extend(t[o],i):t[o]=i;break;default:t[o]=i}}},o=function(){var n=function(t,n){return function(o){if(n.hasOwnProperty(o))return t[o];throw o+" is not defined in the interface."}},o=function(t,n,o,i){var e=function(n,i,e){if(!n.allowWrite())throw o.concat(i)+" is not writeable.";if(!n||typeof e!==n.type)throw i+" is not defined in the interface.";t[i]=e};return i.direct?function(t,o){var i=n[t];e(i,t,o)}:function(t,r){var c=n[t];e(c,t,r),c.shouldSendIndirect()&&i.requestFunction({cmd:"LPData.setValue",args:[o.concat(t),r]})}},i=function(t,n){return function(){return n.apply(t,arguments)}},e=function(t,n,o){if("function"==typeof o.requestFunction)return function(){for(var i=[],e=0,r=arguments.length;e<r;++e)i.push(arguments[e]);return o.requestFunction({cmd:t.length>0?t.concat(n):n,args:i})};throw"requestFunction must be specified for this interface since it is not direct access."},r=function(t,n,o){return function(){"function"==typeof n&&n.apply(t,arguments),"function"==typeof o&&o.apply(t,arguments)}},c=function(s,u,f,a,p,h){var l=!1,d=[];for(var y in a){var v=a[y];v instanceof t?v.isFunction()?!v.requiredBy(h.context)||v.isSyncronousFunction()&&h.asyncOnly||(h.direct||v.isSyncronousFunction()?u&&"function"==typeof u[y]?(s[y]=i(u,u[y]),!h.direct&&v.shouldSendIndirect()&&(s[y]=r(s,s[y],e(p,y,h)))):d.push(v.type+": "+p.concat(y).join(".")):s[y]=e(p,y,h)):v.isConstructor()?v.requiredBy(h.context)&&!h.asyncOnly&&(u&&"function"==typeof u[y]?s[y]=u[y]:d.push(v.type+": "+p.concat(y).join("."))):l=!0:(s.hasOwnProperty(y)||(s[y]={}),c(s[y],u?u[y]:u,f?f[y]:f,a[y],p.concat(y),h))}if(l&&(s.get=n(f,a),s.set=o(f,a,p,h)),d.length>0&&h.checkMissing)throw"Background instance does not support the following:\n"+d.join("\n");return s};return function(t,n){return c(n.instance||{},n.source||n.sourceFunctions,n.source||n.sourceData,t,[],n)}}(),i=function(){var n={},o={},i=function(n,o,e,r){var c=[];for(var s in n){var u=r?r.concat(s):[s],f=n[s];f instanceof t?f.isPrimitive()&&f.requiredBy(o)&&(!e||f.isSyncronized())&&c.push({sourceFunction:f.options&&f.options.sourceFunction,path:u}):c=c.concat(i(f,o,e,u))}return c};return function(t,e){var r=[];t=[].concat(t);for(var c=0;c<t.length;++c){var s,u=t[c];e.syncronizedOnly?void 0===(s=o[u])&&(s=o[u]=i(e.interface,u,!0)):void 0===(s=n[u])&&(s=n[u]=i(e.interface,u,!1)),r=r.concat(s)}return r}}();return{TYPE_CONSTRUCTOR:"contsructor",TYPE_SYNC_FUNCTION:"synchronous function",TYPE_FUNCTION:"function",TYPE_STRING:"string",TYPE_BOOLEAN:"boolean",TYPE_NUMBER:"number",TYPE_OBJECT:"object",Definition:t,extend:n,createInstance:o,getPrimitives:function(t){var n={};if(t.context)for(var o=i(t.context,t),e=0,r=o.length;e<r;++e){var c,s=o[e];c=s.sourceFunction?"function"==typeof s.sourceFunction?s.sourceFunction():LPReflection.callFunction(null,s.sourceFunction,[],{context:t.source}):LPReflection.getValue(t.interface,s.path,{context:t.source}),LPReflection.setValue(null,s.path,c,{context:n})}return n},clearPrimitives:function(t){if(t.context)for(var n=i(t.context,t),o=0;o<n.length;++o)LPReflection.setValue(null,n[o].path,null,{context:t.source})},getName:function(t){for(var n in this)if(t===this[n])return n;throw new Error("Could not find interface name.")}}}();